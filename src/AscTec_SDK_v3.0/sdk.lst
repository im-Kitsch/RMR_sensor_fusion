   1              		.file	"sdk.c"
   9              	.Ltext0:
  10              		.align	2
  11              		.global	SDK_SetEmergencyMode
  13              	SDK_SetEmergencyMode:
  14              	.LFB3:
  15              		.file 1 "sdk.c"
   1:sdk.c         **** /*
   2:sdk.c         **** 
   3:sdk.c         **** AscTec SDK 3.0
   4:sdk.c         **** 
   5:sdk.c         **** Copyright (c) 2011, Ascending Technologies GmbH
   6:sdk.c         **** All rights reserved.
   7:sdk.c         **** 
   8:sdk.c         **** Redistribution and use in source and binary forms, with or without
   9:sdk.c         **** modification, are permitted provided that the following conditions are met:
  10:sdk.c         **** 
  11:sdk.c         ****  * Redistributions of source code must retain the above copyright notice,
  12:sdk.c         ****    this list of conditions and the following disclaimer.
  13:sdk.c         ****  * Redistributions in binary form must reproduce the above copyright
  14:sdk.c         ****    notice, this list of conditions and the following disclaimer in the
  15:sdk.c         ****    documentation and/or other materials provided with the distribution.
  16:sdk.c         **** 
  17:sdk.c         **** THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND ANY
  18:sdk.c         **** EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
  19:sdk.c         **** WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  20:sdk.c         **** DISCLAIMED. IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR ANY
  21:sdk.c         **** DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  22:sdk.c         **** (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  23:sdk.c         **** SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  24:sdk.c         **** CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
  25:sdk.c         **** LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
  26:sdk.c         **** OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
  27:sdk.c         **** DAMAGE.
  28:sdk.c         **** 
  29:sdk.c         ****  */
  30:sdk.c         **** 
  31:sdk.c         **** #include "main.h"
  32:sdk.c         **** #include "sdk.h"
  33:sdk.c         **** #include "LL_HL_comm.h"
  34:sdk.c         **** #include "gpsmath.h"
  35:sdk.c         **** #include "sdk_telemetry.h"
  36:sdk.c         **** #include "uart.h"
  37:sdk.c         **** #include "system.h"
  38:sdk.c         **** #include "lpc_aci_eeprom.h"
  39:sdk.c         **** #ifdef MATLAB
  40:sdk.c         **** #include "..\custom_mdl\onboard_matlab_ert_rtw\onboard_matlab.h"
  41:sdk.c         **** #endif
  42:sdk.c         **** 
  43:sdk.c         **** //Own Includes
  44:sdk.c         **** #include "spi0.h"
  45:sdk.c         **** #include "COBS.h"
  46:sdk.c         **** #include "protocol.h"
  47:sdk.c         **** 
  48:sdk.c         **** struct WO_SDK_STRUCT WO_SDK;
  49:sdk.c         **** struct WO_CTRL_INPUT WO_CTRL_Input;
  50:sdk.c         **** struct RO_RC_DATA RO_RC_Data;
  51:sdk.c         **** struct RO_ALL_DATA RO_ALL_Data;
  52:sdk.c         **** struct WO_DIRECT_MOTOR_CONTROL WO_Direct_Motor_Control;
  53:sdk.c         **** struct WO_DIRECT_INDIVIDUAL_MOTOR_CONTROL WO_Direct_Individual_Motor_Control;
  54:sdk.c         **** 
  55:sdk.c         **** //waypoint example global variables for jeti display
  56:sdk.c         **** unsigned char wpExampleWpNr=0;
  57:sdk.c         **** unsigned char wpExampleActive=0;
  58:sdk.c         **** 
  59:sdk.c         **** //emergency mode variables
  60:sdk.c         **** unsigned char emergencyMode;
  61:sdk.c         **** unsigned char emergencyModeUpdate=0;
  62:sdk.c         **** 
  63:sdk.c         **** //Own local variables
  64:sdk.c         **** protocol_u protocolStream;
  65:sdk.c         **** 
  66:sdk.c         **** 
  67:sdk.c         **** #ifdef MATLAB
  68:sdk.c         **** unsigned char xbee_send_flag=0;
  69:sdk.c         **** unsigned char triggerSaveMatlabParams=0; //trigger command to save matlab parameters to flash
  70:sdk.c         **** struct MATLAB_DEBUG matlab_debug;
  71:sdk.c         **** struct MATLAB_UART matlab_uart, matlab_uart_tmp;
  72:sdk.c         **** struct MATLAB_PARAMS matlab_params, matlab_params_tmp;
  73:sdk.c         **** 
  74:sdk.c         **** void SDK_matlabMainLoop(void);
  75:sdk.c         **** #endif
  76:sdk.c         **** void SDK_EXAMPLE_direct_individual_motor_commands(void);
  77:sdk.c         **** void SDK_EXAMPLE_direct_motor_commands_with_standard_output_mapping(void);
  78:sdk.c         **** void SDK_EXAMPLE_attitude_commands(void);
  79:sdk.c         **** void SDK_EXAMPLE_gps_waypoint_control(void);
  80:sdk.c         **** int SDK_EXAMPLE_turn_motors_on(void);
  81:sdk.c         **** int SDK_EXAMPLE_turn_motors_off(void);
  82:sdk.c         **** 
  83:sdk.c         **** /******** SDK in general ************
  84:sdk.c         ****  *
  85:sdk.c         ****  * You can find further information about the AscTec SDK in our AscTec Wiki: http://wiki.asctec.de
  86:sdk.c         ****  *
  87:sdk.c         ****  * Scroll down for information about how to change the Eclipse settings to use the SDK with the Asc
  88:sdk.c         ****  *
  89:sdk.c         ****  *
  90:sdk.c         ****  * SDK_mainloop(void) is triggered @ 1kHz.
  91:sdk.c         ****  *
  92:sdk.c         ****  * RO_(Read Only) data is updated before entering this function
  93:sdk.c         ****  * and can be read to obtain information for supervision or control
  94:sdk.c         ****  *
  95:sdk.c         ****  * WO_(Write Only) data is written to the LL processor after
  96:sdk.c         ****  * execution of this function.
  97:sdk.c         ****  *
  98:sdk.c         ****  * WO_ and RO_ structs are defined in sdk.h
  99:sdk.c         ****  *
 100:sdk.c         ****  * The struct RO_ALL_Data (defined in sdk.h)
 101:sdk.c         ****  * is used to read all sensor data, results of the data fusion
 102:sdk.c         ****  * and R/C inputs transmitted from the LL-processor. This struct is
 103:sdk.c         ****  * automatically updated at 1 kHz.
 104:sdk.c         ****  *
 105:sdk.c         ****  */
 106:sdk.c         **** 
 107:sdk.c         **** /******* How to flash the high level processor ********
 108:sdk.c         ****  *
 109:sdk.c         ****  * The easiest way to get your code on the high level processor is to use the JTAG-adapter.
 110:sdk.c         ****  *
 111:sdk.c         ****  * It needs three steps to get your code on the high level processor.
 112:sdk.c         ****  * 1. Build your code ("Build Project")
 113:sdk.c         ****  * 2. Connect your JTAG adapter and start the JTAG connection (Run "OpenOCD Asctec-JTAG")
 114:sdk.c         ****  * 3. Flash the processor (Run "Asctec JTAG Debug")
 115:sdk.c         ****  *
 116:sdk.c         ****  * In the menu "Run -> External Tools -> External Tools Configuration..." you
 117:sdk.c         ****  * will find "OpenOCD Asctec-JTAG". If the JTAG connection was activated
 118:sdk.c         ****  * correctly, the console will show only the following line:
 119:sdk.c         ****  * "Info:    openocd.c:92 main(): Open On-Chip Debugger (2007-08-10 22:30 CEST)"
 120:sdk.c         ****  *
 121:sdk.c         ****  * Do not launch more than ONE JTAG-connection at the same time!
 122:sdk.c         ****  *
 123:sdk.c         ****  * In the menu "Run -> Debug Configurations..." you will find "Asctec JTAG Debug"
 124:sdk.c         ****  * If the code was successfully flashed on the processor, the program will switch
 125:sdk.c         ****  * to the Debug window.
 126:sdk.c         ****  *
 127:sdk.c         ****  * If you want to flash the high level processor using a serial interface (AscTec USB adapter)
 128:sdk.c         ****  * and bootloader software like "Flash Magic", you can find the main.hex in your workspace folder.
 129:sdk.c         ****  *
 130:sdk.c         ****  */
 131:sdk.c         **** 
 132:sdk.c         **** /********* Debugging and testing your code ************
 133:sdk.c         ****  *
 134:sdk.c         ****  * After flashing the HL, your code can be debugged online via JTAG. The ARM7 supports ONE hardware
 135:sdk.c         ****  * You can monitor the CPU-load by looking at RO_ALL_Data.HL_cpu_load. As long as this value is bel
 136:sdk.c         ****  * code in SDK_mainloop() is executed at 1 kHz. Example: 0.021 means the HL code uses 21% of the av
 137:sdk.c         ****  *
 138:sdk.c         ****  * To activate the SDK controls, the serial interface switch on your R/C (channel 5) needs to be in
 139:sdk.c         ****  * If you use our standard RC Futaba FF7, the black marked switch on the right hand side needs to b
 140:sdk.c         ****  * the pilot to enable the serial interface.
 141:sdk.c         ****  *
 142:sdk.c         ****  * To test if the flashing of the HLP worked and how to enable the serial interface, you can run th
 143:sdk.c         ****  * motors on and off every 2 seconds" in the SDK_mainloop.
 144:sdk.c         ****  *
 145:sdk.c         ****  */
 146:sdk.c         **** 
 147:sdk.c         **** /********** Serial communication **********
 148:sdk.c         ****  *
 149:sdk.c         ****  * If your project needs communication via HL serial 0 port, the easiest way is to use the AscTec C
 150:sdk.c         ****  * (information and tutorials can be found in the AscTec Wiki) -
 151:sdk.c         ****  * or you can directly program the serial port (you find an example of how to do so in main.c, line
 152:sdk.c         ****  *
 153:sdk.c         ****  */
 154:sdk.c         **** 
 155:sdk.c         **** /********** Simulink Toolkit ***********
 156:sdk.c         ****  *
 157:sdk.c         ****  * To use this SDK in combination with the AscTec Simulink Toolkit you need to change the Build Con
 158:sdk.c         ****  * Click on "Project - Build Configuration - Set Active - AscTec Simulink Toolkit" in the menu bar.
 159:sdk.c         ****  *
 160:sdk.c         ****  * Please carefully follow the complete instructions of the Simulink Toolkit manual before flashing
 161:sdk.c         ****  * You have to go through all steps until you can receive any data with the UART_Communication mode
 162:sdk.c         ****  *
 163:sdk.c         ****  * If you want to combine the automatically generated C-code from the Simulink Toolkit with additio
 164:sdk.c         ****  * please put the additional C-code into SDK_matlabMainLoop().
 165:sdk.c         ****  */
 166:sdk.c         **** 
 167:sdk.c         **** /********** Emergency Modes ************
 168:sdk.c         ****  *
 169:sdk.c         ****  * Now you can set the Emergency Modes directly from the HLP. For more information about the EMs, p
 170:sdk.c         ****  * look at the AscTec Wiki. Please set an emergency mode according to the flight path of your fligh
 171:sdk.c         ****  * with SDK_SetEmergencyMode(). If non was set, Direct Landing is activated.
 172:sdk.c         ****  */
 173:sdk.c         **** 
 174:sdk.c         **** void SDK_mainloop(void)
 175:sdk.c         **** {
 176:sdk.c         **** #ifdef MATLAB
 177:sdk.c         **** 	SDK_matlabMainLoop(); //this runs only in combination with the AscTec Simulink Toolkit
 178:sdk.c         **** 
 179:sdk.c         **** 	//jeti telemetry can always be activated. You may deactivate this call if you don't have the AscTe
 180:sdk.c         **** 	SDK_jetiAscTecExampleRun();
 181:sdk.c         **** 
 182:sdk.c         **** #else //write your own C-code within this function
 183:sdk.c         **** 	/* USER CODE BEGINS HERE */
 184:sdk.c         **** 
 185:sdk.c         **** 	/* --- Refreshing the sensor data --- */
 186:sdk.c         **** 	refreshProtocolStream(&protocolStream);
 187:sdk.c         **** 
 188:sdk.c         **** 	/* --- Generate COBS Byte stream out of sensor data --- */
 189:sdk.c         **** 	uint8_t cobsByteStream[num_sum+2]; //for <256 Bytes to encode
 190:sdk.c         **** 	uint8_t cobs_len = encode_COBS(protocolStream.bytestream, num_sum, cobsByteStream);
 191:sdk.c         **** 
 192:sdk.c         **** 
 193:sdk.c         **** 	/* --- Polling for Nucleo's answer --- */
 194:sdk.c         **** 	uint8_t startingSeq[] = {0x00, 0x01};
 195:sdk.c         **** 	uint8_t startingReceive[2];
 196:sdk.c         **** 	while(!(startingReceive[0] == 0xFE && startingReceive[1] == 0xFF)) //Wait for right answer
 197:sdk.c         **** 	{
 198:sdk.c         **** 		SPI_Master_WriteRead(startingSeq , startingReceive, 2); //Send Starting Sequence, receive answer
 199:sdk.c         **** 	}
 200:sdk.c         **** 
 201:sdk.c         **** 	/* ---  Slave is now listening!  --- */
 202:sdk.c         **** 	SPI_Master_Write(cobsByteStream ,cobs_len); //transferring encoded sensor data to Slave
 203:sdk.c         **** 	//TODO: Check for successful transmission (answer, direct reply, checksum, ...)
 204:sdk.c         **** 
 205:sdk.c         **** 	/* ---  Slave is now calculating (Sensor Fusion) control signals  --- */
 206:sdk.c         **** 
 207:sdk.c         **** 	/* --- Polling for Nucleo's answer --- */
 208:sdk.c         **** 	startingSeq[0] = 0x00;
 209:sdk.c         **** 	startingSeq[1] = 0x02;
 210:sdk.c         **** 	while(!(startingReceive[0] == 0xFD && startingReceive[1] == 0xFF)) //Wait for right answer
 211:sdk.c         **** 	{
 212:sdk.c         **** 		SPI_Master_WriteRead(startingSeq , startingReceive, 2); //Send Starting Sequence, receive answer
 213:sdk.c         **** 	}
 214:sdk.c         **** 
 215:sdk.c         **** 	/* --- Nucleo is now sending control signals to HLP --- */
 216:sdk.c         **** 	//To be continued...
 217:sdk.c         **** 
 218:sdk.c         **** 
 219:sdk.c         **** 
 220:sdk.c         **** 
 221:sdk.c         **** 
 222:sdk.c         **** 
 223:sdk.c         **** 
 224:sdk.c         **** 
 225:sdk.c         **** 
 226:sdk.c         **** 
 227:sdk.c         **** 
 228:sdk.c         **** 
 229:sdk.c         **** 
 230:sdk.c         **** 
 231:sdk.c         **** 
 232:sdk.c         **** 	//example to turn motors on and off every 2 seconds
 233:sdk.c         **** 	/*
 234:sdk.c         ****  	static int timer=0;
 235:sdk.c         **** 	if(++timer<1000) SDK_EXAMPLE_turn_motors_on();
 236:sdk.c         **** 	else if(timer<2000) SDK_EXAMPLE_turn_motors_off();
 237:sdk.c         **** 	else timer=0;
 238:sdk.c         **** 	*/
 239:sdk.c         **** 
 240:sdk.c         **** 
 241:sdk.c         **** 	//examples which show the different control modes
 242:sdk.c         **** 	//SDK_EXAMPLE_direct_individual_motor_commands();
 243:sdk.c         **** 	//SDK_EXAMPLE_direct_motor_commands_with_standard_output_mapping();
 244:sdk.c         **** 	//SDK_EXAMPLE_attitude_commands();
 245:sdk.c         **** 	//SDK_EXAMPLE_gps_waypoint_control();
 246:sdk.c         **** 
 247:sdk.c         **** 	//jeti telemetry can always be activated. You may deactivate this call if you don't use the AscTec
 248:sdk.c         **** 	SDK_jetiAscTecExampleRun();
 249:sdk.c         **** 
 250:sdk.c         **** 	if (wpExampleActive) //this is used to activate the waypoint example via the jeti telemetry displa
 251:sdk.c         **** 		SDK_EXAMPLE_gps_waypoint_control();
 252:sdk.c         **** 
 253:sdk.c         **** #endif
 254:sdk.c         **** }
 255:sdk.c         **** 
 256:sdk.c         **** 
 257:sdk.c         **** /*
 258:sdk.c         ****  *
 259:sdk.c         ****  * Sets emergency mode on LowLevel processor. Select one of the EM_ defines as mode option. See EM_
 260:sdk.c         ****  */
 261:sdk.c         **** 
 262:sdk.c         **** void SDK_SetEmergencyMode(unsigned char mode) {
  16              	@ Function supports interworking.
  17              		@ args = 0, pretend = 0, frame = 0
  18              		@ frame_needed = 0, uses_anonymous_args = 0
  19              		@ link register save eliminated.
  20              	.LVL0:
  21              		and	r0, r0, #255
  22 0000 FF0000E2 		.loc 1 263 0
 263:sdk.c         **** if ((mode != EM_SAVE_EXTENDED_WAITING_TIME) && (mode != EM_SAVE) && (mode
  23              	, r0, #1
  24 0004 013040E2 		cmp	r0, #8
  25 0008 080050E3 		cmpne	r3, #1
  26 000c 01005313 		.loc 1 262 0
  27              		@ lr needed for prologue
  28              		.loc 1 263 0
  29              		bls	.L2
  30 0010 0100009A 		cmp	r0, #4
  31 0014 040050E3 		bxne	lr
  32 0018 1EFF2F11 	.L2:
  33              		.loc 1 267 0
 264:sdk.c         **** 			!= EM_RETURN_AT_MISSION_SUMMIT) && (mode
 265:sdk.c         **** 			!= EM_RETURN_AT_PREDEFINED_HEIGHT))
 266:sdk.c         **** 		return;
 267:sdk.c         **** 	emergencyMode = mode;
  34              	7
  35 001c 10309FE5 		strb	r0, [r3, #0]
  36 0020 0000C3E5 		.loc 1 268 0
 268:sdk.c         **** 	emergencyModeUpdate = 1;
  37              	r	r3, .L7+4
  38 0024 0C309FE5 		mov	r2, #1
  39 0028 0120A0E3 		strb	r2, [r3, #0]
  40 002c 0020C3E5 		bx	lr
  41 0030 1EFF2FE1 	.L8:
  42              		.align	2
  43              	.L7:
  44              		.word	emergencyMode
  45 0034 00000000 		.word	emergencyModeUpdate
  46 0038 00000000 	.LFE3:
  48              		.align	2
  49              		.global	SDK_EXAMPLE_direct_individual_motor_commands
  51              	SDK_EXAMPLE_direct_individual_motor_commands:
  52              	.LFB4:
  53              		.loc 1 275 0
 269:sdk.c         **** }
 270:sdk.c         **** 
 271:sdk.c         **** /*
 272:sdk.c         ****  * the following example shows the direct motor command usage by mapping the stick directly to the 
 273:sdk.c         ****  */
 274:sdk.c         **** void SDK_EXAMPLE_direct_individual_motor_commands(void)
 275:sdk.c         **** {
  54              	rts interworking.
  55              		@ args = 0, pretend = 0, frame = 0
  56              		@ frame_needed = 0, uses_anonymous_args = 0
  57              		@ link register save eliminated.
  58              		.loc 1 290 0
 276:sdk.c         **** 
 277:sdk.c         **** 	WO_SDK.ctrl_mode=0x00;	//0x00: direct individual motor control: individual commands for motors 0..
 278:sdk.c         **** 							//0x01: direct motor control using standard output mapping: commands are interpreted as pitc
 279:sdk.c         **** 							//0x02: attitude and throttle control: commands are input for standard attitude controller
 280:sdk.c         **** 							//0x03: GPS waypoint control
 281:sdk.c         **** 
 282:sdk.c         **** 	WO_SDK.ctrl_enabled=1;  //0: disable control by HL processor
 283:sdk.c         **** 							//1: enable control by HL processor
 284:sdk.c         **** 
 285:sdk.c         **** 	WO_SDK.disable_motor_onoff_by_stick=0;
 286:sdk.c         **** 
 287:sdk.c         **** 	unsigned int i;
 288:sdk.c         **** 
 289:sdk.c         **** 	//scale throttle stick to [0..200] and map it to all motors
 290:sdk.c         **** 	WO_Direct_Individual_Motor_Control.motor[0]=RO_ALL_Data.channel[2]/21;
  59              	r0, .L23
  60 003c B0009FE5 		ldr	r2, .L23+4
  61 0040 B0209FE5 		ldrh	r3, [r0, #16]
  62 0044 B031D0E1 		umull	ip, r1, r2, r3
  63 0048 92C381E0 		rsb	r3, r1, r3
  64 004c 033061E0 		.loc 1 297 0
 291:sdk.c         **** 	WO_Direct_Individual_Motor_Control.motor[1]=RO_ALL_Data.channel[2]/21;
 292:sdk.c         **** 	WO_Direct_Individual_Motor_Control.motor[2]=RO_ALL_Data.channel[2]/21;
 293:sdk.c         **** 	WO_Direct_Individual_Motor_Control.motor[3]=RO_ALL_Data.channel[2]/21;
 294:sdk.c         **** 	WO_Direct_Individual_Motor_Control.motor[4]=RO_ALL_Data.channel[2]/21;
 295:sdk.c         **** 	WO_Direct_Individual_Motor_Control.motor[5]=RO_ALL_Data.channel[2]/21;
 296:sdk.c         **** 
 297:sdk.c         **** 	if (RO_ALL_Data.channel[6]>2500)
  65              	ip, [r0, #24]
  66 0050 B8C1D0E1 		.loc 1 290 0
  67              		add	r1, r1, r3, lsr #1
  68 0054 A31081E0 		.loc 1 297 0
  69              		mov	r3, #2496
  70 0058 273DA0E3 		.loc 1 290 0
  71              		ldr	r0, .L23+8
  72 005c 98009FE5 		.loc 1 277 0
  73              		ldr	r2, .L23+12
  74 0060 98209FE5 		.loc 1 297 0
  75              		add	r3, r3, #4
  76 0064 043083E2 		.loc 1 290 0
  77              		mov	r1, r1, lsr #4
  78 0068 2112A0E1 		and	r1, r1, #255
  79 006c FF1001E2 		.loc 1 297 0
  80              		cmp	ip, r3
  81 0070 03005CE1 		.loc 1 277 0
  82              		mov	r3, #0
  83 0074 0030A0E3 		.loc 1 282 0
  84              		mov	ip, #1
  85 0078 01C0A0E3 		.loc 1 275 0
  86              		@ lr needed for prologue
  87              		.loc 1 285 0
  88              		strb	r3, [r2, #2]
  89 007c 0230C2E5 		.loc 1 295 0
  90              		strb	r1, [r0, #5]
  91 0080 0510C0E5 		.loc 1 277 0
  92              		strb	r3, [r2, #0]
  93 0084 0030C2E5 		.loc 1 282 0
  94              		strb	ip, [r2, #1]
  95 0088 01C0C2E5 		.loc 1 290 0
  96              		strb	r1, [r0, #0]
  97 008c 0010C0E5 		.loc 1 291 0
  98              		strb	r1, [r0, #1]
  99 0090 0110C0E5 		.loc 1 292 0
 100              		strb	r1, [r0, #2]
 101 0094 0210C0E5 		.loc 1 293 0
 102              		strb	r1, [r0, #3]
 103 0098 0310C0E5 		.loc 1 294 0
 104              		strb	r1, [r0, #4]
 105 009c 0410C0E5 		.loc 1 304 0
 298:sdk.c         **** 	{
 299:sdk.c         **** 		WO_Direct_Individual_Motor_Control.motorReverseMask=0x01; //invert motor 0 if AUX switch is enabl
 300:sdk.c         **** 		//limit inverted speed (IMPORTANT! THIS IS NOT DONE AUTOMATICALLY!)
 301:sdk.c         **** 		if (WO_Direct_Individual_Motor_Control.motor[0]>80)
 302:sdk.c         **** 			WO_Direct_Individual_Motor_Control.motor[0]=80;
 303:sdk.c         **** 	}else
 304:sdk.c         **** 		WO_Direct_Individual_Motor_Control.motorReverseMask=0x00;
 106              	L12
 107 00a0 0830C095 		.loc 1 301 0
 108              		ldrb	r3, [r0, #0]	@ zero_extendqisi2
 109 00a4 0400009A 		cmp	r3, #80
 110              		.loc 1 302 0
 111 00a8 0030D0E5 		movhi	r3, #80
 112 00ac 500053E3 		.loc 1 299 0
 113              		strb	ip, [r0, #8]
 114 00b0 5030A083 		.loc 1 302 0
 115              		strhib	r3, [r0, #0]
 116 00b4 08C0C0E5 	.L12:
 117              		.loc 1 304 0
 118 00b8 0030C085 		ldr	r2, .L23+8
 119              		mov	r0, #1
 120              		add	r1, r2, #6
 121 00bc 38209FE5 		mvn	ip, #55
 122 00c0 0100A0E3 	.L14:
 123 00c4 061082E2 		.loc 1 311 0
 124 00c8 37C0E0E3 		ldrb	r3, [r2, #0]	@ zero_extendqisi2
 125              		cmp	r3, #0
 305:sdk.c         **** 
 306:sdk.c         **** 
 307:sdk.c         **** 	//make sure commands are never 0 so that motors will always keep spinning
 308:sdk.c         ****     //also make sure that commands stay within range
 309:sdk.c         ****     for(i=0;i<6;i++)
 310:sdk.c         ****     {
 311:sdk.c         ****     	if(!WO_Direct_Individual_Motor_Control.motor[i]) WO_Direct_Individual_Motor_Control.motor[i]=1
 126              	
 127 00cc 0030D2E5 		beq	.L17
 128 00d0 000053E3 		.loc 1 312 0
 129 00d4 0000C205 		cmp	r3, #200
 130 00d8 0100000A 		strhib	ip, [r2, #0]
 312:sdk.c         ****     	else if (WO_Direct_Individual_Motor_Control.motor[i]>200) WO_Direct_Individual_Motor_Control.m
 131              	:
 132 00dc C80053E3 		add	r2, r2, #1
 133 00e0 00C0C285 		.loc 1 309 0
 134              		cmp	r2, r1
 135 00e4 012082E2 		bne	.L14
 136              		.loc 1 314 0
 137 00e8 010052E1 		bx	lr
 138 00ec F6FFFF1A 	.L24:
 313:sdk.c         ****     }
 314:sdk.c         **** }
 139              	2
 140 00f0 1EFF2FE1 	.L23:
 141              		.word	RO_ALL_Data
 142              		.word	-2045222521
 143              		.word	WO_Direct_Individual_Motor_Control
 144 00f4 00000000 		.word	WO_SDK
 145 00f8 87611886 	.LFE4:
 147 0100 00000000 		.align	2
 148              		.global	SDK_EXAMPLE_direct_motor_commands_with_standard_output_mapping
 150              	SDK_EXAMPLE_direct_motor_commands_with_standard_output_mapping:
 151              	.LFB5:
 152              		.loc 1 318 0
 153              		@ Function supports interworking.
 154              		@ args = 0, pretend = 0, frame = 0
 315:sdk.c         **** 
 316:sdk.c         **** 
 317:sdk.c         **** void SDK_EXAMPLE_direct_motor_commands_with_standard_output_mapping(void)
 318:sdk.c         **** {
 155              	= 0, uses_anonymous_args = 0
 156              		.loc 1 331 0
 157              		ldr	r3, .L27
 158              		.loc 1 318 0
 319:sdk.c         **** 	WO_SDK.ctrl_mode=0x01;	//0x00: direct individual motor control: individual commands for motors 0..
 320:sdk.c         **** 							//0x01: direct motor control using standard output mapping: commands are interpreted as pitc
 321:sdk.c         **** 							//0x02: attitude and throttle control: commands are input for standard attitude controller
 322:sdk.c         **** 							//0x03: GPS waypoint control
 323:sdk.c         **** 
 324:sdk.c         **** 	WO_SDK.ctrl_enabled=1;  //0: disable control by HL processor
 325:sdk.c         **** 							//1: enable control by HL processor
 326:sdk.c         **** 
 327:sdk.c         **** 	/*
 328:sdk.c         **** 	 *  Stick commands directly mapped to motors, NO attitude control! Do NOT try to fly!
 329:sdk.c         **** 	 * */
 330:sdk.c         **** 
 331:sdk.c         **** 	WO_Direct_Motor_Control.pitch=(4095-RO_ALL_Data.channel[0])/21;
 159              	fd	sp!, {r4, r5, r6, r7, lr}
 160 0104 94309FE5 	.LCFI0:
 161              		.loc 1 333 0
 162 0108 F0402DE9 		ldrh	ip, [r3, #16]
 163              		.loc 1 332 0
 332:sdk.c         **** 	WO_Direct_Motor_Control.roll=RO_ALL_Data.channel[1]/21;
 333:sdk.c         **** 	WO_Direct_Motor_Control.thrust=RO_ALL_Data.channel[2]/21;
 164              	r4, .L27+4
 165 010c B0C1D3E1 		ldrh	r0, [r3, #14]
 166              		.loc 1 331 0
 167 0110 8C409FE5 		ldrh	r6, [r3, #12]
 168 0114 BE00D3E1 		.loc 1 334 0
 169              		ldrh	r1, [r3, #18]
 170 0118 BC60D3E1 		.loc 1 331 0
 334:sdk.c         **** 	WO_Direct_Motor_Control.yaw=(4095-RO_ALL_Data.channel[3])/21;
 171              	, #4080
 172 011c B211D3E1 		.loc 1 333 0
 173              		umull	r3, r5, r4, ip
 174 0120 FF2EA0E3 		.loc 1 331 0
 175              		mov	r3, #817889280
 176 0124 943C85E0 		.loc 1 332 0
 177              		umull	r7, lr, r4, r0
 178 0128 C335A0E3 		.loc 1 331 0
 179              		add	r2, r2, #15
 180 012c 94708EE0 		add	r3, r3, #199680
 181              		.loc 1 334 0
 182 0130 0F2082E2 		rsb	r1, r1, r2
 183 0134 C33B83E2 		.loc 1 331 0
 184              		add	r3, r3, #49
 185 0138 021061E0 		rsb	r2, r6, r2
 186              		.loc 1 334 0
 187 013c 313083E2 		smull	r4, r6, r3, r1
 188 0140 022066E0 		.loc 1 331 0
 189              		smull	r7, r4, r3, r2
 190 0144 9341C6E0 		.loc 1 332 0
 191              		rsb	r0, lr, r0
 192 0148 9372C4E0 		.loc 1 333 0
 193              		rsb	ip, r5, ip
 194 014c 00006EE0 		.loc 1 331 0
 195              		ldr	r3, .L27+8
 196 0150 0CC065E0 		.loc 1 332 0
 197              		add	lr, lr, r0, lsr #1
 198 0154 4C309FE5 		.loc 1 333 0
 199              		add	r5, r5, ip, lsr #1
 200 0158 A0E08EE0 		.loc 1 331 0
 201              		mov	r2, r2, asr #31
 202 015c AC5085E0 		.loc 1 319 0
 203              		ldr	ip, .L27+12
 204 0160 C22FA0E1 		.loc 1 334 0
 205              		mov	r1, r1, asr #31
 206 0164 40C09FE5 		.loc 1 319 0
 207              		mov	r0, #1
 208 0168 C11FA0E1 		.loc 1 331 0
 209              		rsb	r2, r2, r4, asr #2
 210 016c 0100A0E3 		.loc 1 334 0
 211              		rsb	r1, r1, r6, asr #2
 212 0170 442162E0 		.loc 1 332 0
 213              		mov	lr, lr, lsr #4
 214 0174 461161E0 		.loc 1 333 0
 215              		mov	r5, r5, lsr #4
 216 0178 2EE2A0E1 		.loc 1 324 0
 217              		strb	r0, [ip, #1]
 218 017c 2552A0E1 		.loc 1 334 0
 219              		strb	r1, [r3, #2]
 220 0180 0100CCE5 		.loc 1 331 0
 221              		strb	r2, [r3, #0]
 222 0184 0210C3E5 		.loc 1 332 0
 223              		strb	lr, [r3, #1]
 224 0188 0020C3E5 		.loc 1 333 0
 225              		strb	r5, [r3, #3]
 226 018c 01E0C3E5 		.loc 1 319 0
 227              		strb	r0, [ip, #0]
 228 0190 0350C3E5 		.loc 1 336 0
 229              		ldmfd	sp!, {r4, r5, r6, r7, lr}
 230 0194 0000CCE5 		bx	lr
 335:sdk.c         **** 
 336:sdk.c         **** }
 231              		.word	WO_Direct_Motor_Control
 232 0198 F040BDE8 		.word	WO_SDK
 233 019c 1EFF2FE1 	.LFE5:
 235              		.align	2
 236              		.global	SDK_EXAMPLE_attitude_commands
 238 01a4 87611886 	SDK_EXAMPLE_attitude_commands:
 239 01a8 00000000 	.LFB6:
 240 01ac 00000000 		.loc 1 340 0
 241              		@ Function supports interworking.
 242              		@ args = 0, pretend = 0, frame = 0
 243              		@ frame_needed = 0, uses_anonymous_args = 0
 244              		@ link register save eliminated.
 245              		.loc 1 341 0
 246              		ldr	r1, .L31
 247              		.loc 1 350 0
 337:sdk.c         **** 
 338:sdk.c         **** 
 339:sdk.c         **** void SDK_EXAMPLE_attitude_commands(void)
 340:sdk.c         **** {
 248              	.loc 1 346 0
 249              		mov	r3, #1
 250              		strb	r3, [r1, #1]
 251              		.loc 1 353 0
 252              		mov	r3, #400	@ movhi
 341:sdk.c         **** 	WO_SDK.ctrl_mode=0x02;	//0x00: direct individual motor control: individual commands for motors 0..
 253              	 1 341 0
 254 01b0 24109FE5 		mov	r2, #2
 342:sdk.c         **** 							//0x01: direct motor control using standard output mapping: commands are interpreted as pitc
 343:sdk.c         **** 							//0x02: attitude and throttle control: commands are input for standard attitude controller
 344:sdk.c         **** 							//0x03: GPS waypoint control
 345:sdk.c         **** 
 346:sdk.c         **** 	WO_SDK.ctrl_enabled=1;  //0: disable control by HL processor
 347:sdk.c         **** 							//1: enable control by HL processor
 348:sdk.c         **** 
 349:sdk.c         **** 	//with this example the UAV will go to ~10% throttle when SDK control is activated
 350:sdk.c         **** 	WO_CTRL_Input.ctrl=0x08;	//0x08: enable throttle control by HL. Height control and GPS are deactiv
 255              	loc 1 353 0
 256 01b4 24009FE5 		strh	r3, [r0, #6]	@ movhi
 257              		.loc 1 350 0
 258 01b8 0130A0E3 		mov	r3, #8	@ movhi
 259 01bc 0130C1E5 		.loc 1 340 0
 351:sdk.c         **** 								//pitch, roll and yaw are still commanded via the remote control
 352:sdk.c         **** 
 353:sdk.c         **** 	WO_CTRL_Input.thrust=400;	//10% throttle command
 260              	 needed for prologue
 261 01c0 193EA0E3 		.loc 1 341 0
 262              		strb	r2, [r1, #0]
 263 01c4 0220A0E3 		.loc 1 350 0
 264              		strh	r3, [r0, #8]	@ movhi
 265 01c8 B630C0E1 		.loc 1 356 0
 266              		bx	lr
 267 01cc 0830A0E3 	.L32:
 268              		.align	2
 269              	.L31:
 270              		.word	WO_SDK
 271 01d0 0020C1E5 		.word	WO_CTRL_Input
 272              	.LFE6:
 354:sdk.c         **** 
 355:sdk.c         **** 
 356:sdk.c         **** }
 274              	obal	SDK_EXAMPLE_turn_motors_on
 276              	SDK_EXAMPLE_turn_motors_on:
 277              	.LFB8:
 278              		.loc 1 637 0
 279 01dc 00000000 		@ Function supports interworking.
 280 01e0 00000000 		@ args = 0, pretend = 0, frame = 0
 281              		@ frame_needed = 0, uses_anonymous_args = 0
 282              		.loc 1 650 0
 283              		ldr	r0, .L40
 284              		ldr	r3, [r0, #0]
 285              		.loc 1 640 0
 286              		ldr	r2, .L40+4
 287              		.loc 1 650 0
 357:sdk.c         **** 
 358:sdk.c         **** 
 359:sdk.c         **** 
 360:sdk.c         **** /* This function demonstrates a simple waypoint command generation. The switch on Channel 7 is used
 361:sdk.c         ****  * to activate a 15m by 15m square. Therefore a waypoint is calculated from the current position an
 362:sdk.c         ****  * height and is transmitted to the low level processor. The waypoint status is monitored to switch
 363:sdk.c         ****  * the next waypoint after the current one is reached.
 364:sdk.c         ****  *
 365:sdk.c         ****  * wpCtrlWpCmd is used to send a command to the low level processor. Different options like waypoin
 366:sdk.c         ****  * are available. See LL_HL_comm.h for WP_CMD_* defines
 367:sdk.c         ****  *
 368:sdk.c         ****  * wpCtrlWpCmdUpdated has to be set to 1 to send the command. When the cmd is sent it is set back t
 369:sdk.c         ****  *
 370:sdk.c         ****  * wpCtrlAckTrigger is set to 1 when the LL accepts the waypoint
 371:sdk.c         ****  *
 372:sdk.c         ****  * wpCtrlNavStatus gives you a navigation status. See WP_NAVSTAT_* defines in SDK.h for options
 373:sdk.c         ****  *
 374:sdk.c         ****  * wpCtrlDistToWp gives you the current distance to the current waypoint in dm (= 10 cm)
 375:sdk.c         ****  */
 376:sdk.c         **** void SDK_EXAMPLE_gps_waypoint_control()
 377:sdk.c         **** {
 378:sdk.c         **** 	static unsigned char wpExampleState=0;
 379:sdk.c         **** 	static double originLat,originLon;
 380:sdk.c         **** 
 381:sdk.c         **** 
 382:sdk.c         **** 	WO_SDK.ctrl_mode=0x03;
 383:sdk.c         **** 
 384:sdk.c         **** 	WO_SDK.ctrl_enabled=1;  //0: disable control by HL processor
 385:sdk.c         **** 							//1: enable control by HL processor
 386:sdk.c         **** 
 387:sdk.c         **** 	switch (wpExampleState)
 388:sdk.c         **** 	{
 389:sdk.c         **** 		//prior to start, the lever on channel 7 has to be in "OFF" position
 390:sdk.c         **** 		case 0:
 391:sdk.c         **** 		if ((RO_ALL_Data.channel[6]<1600) || (wpExampleActive))
 392:sdk.c         **** 			wpExampleState=1;
 393:sdk.c         **** 		break;
 394:sdk.c         **** 
 395:sdk.c         **** 		case 1:
 396:sdk.c         **** 		if ((RO_ALL_Data.channel[6]>2400) || (wpExampleActive))
 397:sdk.c         **** 		{
 398:sdk.c         **** 			double lat,lon;
 399:sdk.c         **** 			//lever was set to "ON" state -> calculate and send first waypoint and switch state
 400:sdk.c         **** 
 401:sdk.c         **** 			//fill waypoint structure
 402:sdk.c         **** 			wpToLL.max_speed=100;
 403:sdk.c         **** 			wpToLL.pos_acc=3000; 	//3m accuracy
 404:sdk.c         **** 			wpToLL.time=400; 		//4 seconds waiting time at each waypoint
 405:sdk.c         **** 			wpToLL.wp_activated=1;
 406:sdk.c         **** 
 407:sdk.c         **** 			//see LL_HL_comm.h for WPPROP defines
 408:sdk.c         **** 			wpToLL.properties=WPPROP_ABSCOORDS|WPPROP_AUTOMATICGOTO|WPPROP_HEIGHTENABLED|WPPROP_YAWENABLED;
 409:sdk.c         **** 
 410:sdk.c         **** 			//use current height and yaw
 411:sdk.c         **** 			wpToLL.yaw=RO_ALL_Data.angle_yaw; //use current yaw
 412:sdk.c         **** 			wpToLL.height=RO_ALL_Data.fusion_height; //use current height
 413:sdk.c         **** 
 414:sdk.c         **** 			originLat=(double)GPS_Data.latitude/10000000.0;
 415:sdk.c         **** 			originLon=(double)GPS_Data.longitude/10000000.0;
 416:sdk.c         **** 
 417:sdk.c         **** 			//calculate a position 15m north of us
 418:sdk.c         **** 			xy2latlon(originLat,originLon,0.0,15.0,&lat,&lon);
 419:sdk.c         **** 
 420:sdk.c         **** 			wpToLL.X=lon*10000000;
 421:sdk.c         **** 			wpToLL.Y=lat*10000000;
 422:sdk.c         **** 
 423:sdk.c         **** 			//calc chksum
 424:sdk.c         **** 			wpToLL.chksum = 0xAAAA
 425:sdk.c         **** 									+ wpToLL.yaw
 426:sdk.c         **** 									+ wpToLL.height
 427:sdk.c         **** 									+ wpToLL.time
 428:sdk.c         **** 									+ wpToLL.X
 429:sdk.c         **** 									+ wpToLL.Y
 430:sdk.c         **** 									+ wpToLL.max_speed
 431:sdk.c         **** 									+ wpToLL.pos_acc
 432:sdk.c         **** 									+ wpToLL.properties
 433:sdk.c         **** 									+ wpToLL.wp_activated;
 434:sdk.c         **** 
 435:sdk.c         **** 			//send waypoint
 436:sdk.c         **** 			wpCtrlAckTrigger=0;
 437:sdk.c         **** 			wpCtrlWpCmd=WP_CMD_SINGLE_WP;
 438:sdk.c         **** 			wpCtrlWpCmdUpdated=1;
 439:sdk.c         **** 			wpExampleWpNr=0;
 440:sdk.c         **** 			wpExampleState=2;
 441:sdk.c         **** 
 442:sdk.c         **** 		}
 443:sdk.c         **** 		break;
 444:sdk.c         **** 
 445:sdk.c         **** 		case 2:
 446:sdk.c         **** 			//wait until cmd is processed and sent to LL processor
 447:sdk.c         **** 			if ((wpCtrlWpCmdUpdated==0) && (wpCtrlAckTrigger))
 448:sdk.c         **** 			{
 449:sdk.c         **** 				//check if waypoint was reached and wait time is over
 450:sdk.c         **** 				if (wpCtrlNavStatus&(WP_NAVSTAT_REACHED_POS_TIME))
 451:sdk.c         **** 				{
 452:sdk.c         **** 					//new waypoint
 453:sdk.c         **** 					double lat,lon;
 454:sdk.c         **** 
 455:sdk.c         **** 					//fill waypoint structure
 456:sdk.c         **** 					wpToLL.max_speed=100;
 457:sdk.c         **** 					wpToLL.pos_acc=3000; //3m accuracy
 458:sdk.c         **** 					wpToLL.time=400; //4 seconds wait time
 459:sdk.c         **** 					wpToLL.wp_activated=1;
 460:sdk.c         **** 
 461:sdk.c         **** 					//see LL_HL_comm.h for WPPROP defines
 462:sdk.c         **** 					wpToLL.properties=WPPROP_ABSCOORDS|WPPROP_AUTOMATICGOTO|WPPROP_HEIGHTENABLED|WPPROP_YAWENABLED
 463:sdk.c         **** 
 464:sdk.c         **** 					//use current height and yaw
 465:sdk.c         **** 					wpToLL.yaw=RO_ALL_Data.angle_yaw; //use current yaw
 466:sdk.c         **** 					wpToLL.height=RO_ALL_Data.fusion_height; //use current height
 467:sdk.c         **** 
 468:sdk.c         **** 					//calculate a position 15m north and 15m east of origin
 469:sdk.c         **** 					xy2latlon(originLat,originLon,15.0,15.0,&lat,&lon);
 470:sdk.c         **** 
 471:sdk.c         **** 					wpToLL.X=lon*10000000;
 472:sdk.c         **** 					wpToLL.Y=lat*10000000;
 473:sdk.c         **** 
 474:sdk.c         **** 					//calc chksum
 475:sdk.c         **** 					wpToLL.chksum = 0xAAAA
 476:sdk.c         **** 											+ wpToLL.yaw
 477:sdk.c         **** 											+ wpToLL.height
 478:sdk.c         **** 											+ wpToLL.time
 479:sdk.c         **** 											+ wpToLL.X
 480:sdk.c         **** 											+ wpToLL.Y
 481:sdk.c         **** 											+ wpToLL.max_speed
 482:sdk.c         **** 											+ wpToLL.pos_acc
 483:sdk.c         **** 											+ wpToLL.properties
 484:sdk.c         **** 											+ wpToLL.wp_activated;
 485:sdk.c         **** 					//send waypoint
 486:sdk.c         **** 					wpCtrlAckTrigger=0;
 487:sdk.c         **** 					wpCtrlWpCmd=WP_CMD_SINGLE_WP;
 488:sdk.c         **** 					wpCtrlWpCmdUpdated=1;
 489:sdk.c         **** 					wpExampleWpNr++;
 490:sdk.c         **** 
 491:sdk.c         **** 					wpExampleState=3;
 492:sdk.c         **** 				}
 493:sdk.c         **** 
 494:sdk.c         **** 				if (wpCtrlNavStatus&WP_NAVSTAT_PILOT_ABORT)
 495:sdk.c         **** 				{
 496:sdk.c         **** 					wpExampleActive=0;
 497:sdk.c         **** 					wpExampleState=0;
 498:sdk.c         **** 				}
 499:sdk.c         **** 
 500:sdk.c         **** 
 501:sdk.c         **** 			}
 502:sdk.c         **** 			if ((RO_ALL_Data.channel[6]<1600) && (wpExampleActive==0))
 503:sdk.c         **** 						wpExampleState=0;
 504:sdk.c         **** 		break;
 505:sdk.c         **** 
 506:sdk.c         **** 		case 3:
 507:sdk.c         **** 			//wait until cmd is processed and sent to LL processor
 508:sdk.c         **** 			if ((wpCtrlWpCmdUpdated==0) && (wpCtrlAckTrigger))
 509:sdk.c         **** 			{
 510:sdk.c         **** 				//check if waypoint was reached and wait time is over
 511:sdk.c         **** 				if (wpCtrlNavStatus&(WP_NAVSTAT_REACHED_POS_TIME))
 512:sdk.c         **** 				{
 513:sdk.c         **** 					//new waypoint
 514:sdk.c         **** 					double lat,lon;
 515:sdk.c         **** 
 516:sdk.c         **** 					//fill waypoint structure
 517:sdk.c         **** 					wpToLL.max_speed=100;
 518:sdk.c         **** 					wpToLL.pos_acc=3000; //3m accuracy
 519:sdk.c         **** 					wpToLL.time=400; //4 seconds wait time
 520:sdk.c         **** 					wpToLL.wp_activated=1;
 521:sdk.c         **** 
 522:sdk.c         **** 					//see LL_HL_comm.h for WPPROP defines
 523:sdk.c         **** 					wpToLL.properties=WPPROP_ABSCOORDS|WPPROP_AUTOMATICGOTO|WPPROP_HEIGHTENABLED|WPPROP_YAWENABLED
 524:sdk.c         **** 
 525:sdk.c         **** 					//use current height and yaw
 526:sdk.c         **** 					wpToLL.yaw=RO_ALL_Data.angle_yaw; //use current yaw
 527:sdk.c         **** 					wpToLL.height=RO_ALL_Data.fusion_height; //use current height
 528:sdk.c         **** 
 529:sdk.c         **** 					//calculate a position 15m east of origin
 530:sdk.c         **** 					xy2latlon(originLat,originLon,15.0,0.0,&lat,&lon);
 531:sdk.c         **** 
 532:sdk.c         **** 					wpToLL.X=lon*10000000;
 533:sdk.c         **** 					wpToLL.Y=lat*10000000;
 534:sdk.c         **** 
 535:sdk.c         **** 					//calc chksum
 536:sdk.c         **** 					wpToLL.chksum = 0xAAAA
 537:sdk.c         **** 											+ wpToLL.yaw
 538:sdk.c         **** 											+ wpToLL.height
 539:sdk.c         **** 											+ wpToLL.time
 540:sdk.c         **** 											+ wpToLL.X
 541:sdk.c         **** 											+ wpToLL.Y
 542:sdk.c         **** 											+ wpToLL.max_speed
 543:sdk.c         **** 											+ wpToLL.pos_acc
 544:sdk.c         **** 											+ wpToLL.properties
 545:sdk.c         **** 											+ wpToLL.wp_activated;
 546:sdk.c         **** 
 547:sdk.c         **** 					//send waypoint
 548:sdk.c         **** 					wpCtrlAckTrigger=0;
 549:sdk.c         **** 					wpCtrlWpCmd=WP_CMD_SINGLE_WP;
 550:sdk.c         **** 					wpCtrlWpCmdUpdated=1;
 551:sdk.c         **** 					wpExampleWpNr++;
 552:sdk.c         **** 
 553:sdk.c         **** 					wpExampleState=4;
 554:sdk.c         **** 				}
 555:sdk.c         **** 
 556:sdk.c         **** 				if (wpCtrlNavStatus&WP_NAVSTAT_PILOT_ABORT)
 557:sdk.c         **** 				{
 558:sdk.c         **** 					wpExampleActive=0;
 559:sdk.c         **** 					wpExampleState=0;
 560:sdk.c         **** 				}
 561:sdk.c         **** 
 562:sdk.c         **** 
 563:sdk.c         **** 			}
 564:sdk.c         **** 			if ((RO_ALL_Data.channel[6]<1600) && (wpExampleActive==0))
 565:sdk.c         **** 						wpExampleState=0;
 566:sdk.c         **** 		break;
 567:sdk.c         **** 
 568:sdk.c         **** 		case 4:
 569:sdk.c         **** 			//wait until cmd is processed and sent to LL processor
 570:sdk.c         **** 			if ((wpCtrlWpCmdUpdated==0) && (wpCtrlAckTrigger))
 571:sdk.c         **** 			{
 572:sdk.c         **** 				//check if waypoint was reached and wait time is over
 573:sdk.c         **** 				if (wpCtrlNavStatus&(WP_NAVSTAT_REACHED_POS_TIME))
 574:sdk.c         **** 				{
 575:sdk.c         **** 
 576:sdk.c         **** 					//fill waypoint structure
 577:sdk.c         **** 					wpToLL.max_speed=100;
 578:sdk.c         **** 					wpToLL.pos_acc=3000; //3m accuracy
 579:sdk.c         **** 					wpToLL.time=400; //4 seconds wait time
 580:sdk.c         **** 					wpToLL.wp_activated=1;
 581:sdk.c         **** 
 582:sdk.c         **** 					//see LL_HL_comm.h for WPPROP defines
 583:sdk.c         **** 					wpToLL.properties=WPPROP_ABSCOORDS|WPPROP_AUTOMATICGOTO|WPPROP_HEIGHTENABLED|WPPROP_YAWENABLED
 584:sdk.c         **** 
 585:sdk.c         **** 					//use current height and yaw
 586:sdk.c         **** 					wpToLL.yaw=RO_ALL_Data.angle_yaw; //use current yaw
 587:sdk.c         **** 					wpToLL.height=RO_ALL_Data.fusion_height; //use current height
 588:sdk.c         **** 
 589:sdk.c         **** 					//go to the beginning
 590:sdk.c         **** 
 591:sdk.c         **** 					wpToLL.X=originLon*10000000;
 592:sdk.c         **** 					wpToLL.Y=originLat*10000000;
 593:sdk.c         **** 
 594:sdk.c         **** 					//calc chksum
 595:sdk.c         **** 					wpToLL.chksum = 0xAAAA
 596:sdk.c         **** 											+ wpToLL.yaw
 597:sdk.c         **** 											+ wpToLL.height
 598:sdk.c         **** 											+ wpToLL.time
 599:sdk.c         **** 											+ wpToLL.X
 600:sdk.c         **** 											+ wpToLL.Y
 601:sdk.c         **** 											+ wpToLL.max_speed
 602:sdk.c         **** 											+ wpToLL.pos_acc
 603:sdk.c         **** 											+ wpToLL.properties
 604:sdk.c         **** 											+ wpToLL.wp_activated;
 605:sdk.c         **** 
 606:sdk.c         **** 					//send waypoint
 607:sdk.c         **** 					wpCtrlAckTrigger=0;
 608:sdk.c         **** 					wpCtrlWpCmd=WP_CMD_SINGLE_WP;
 609:sdk.c         **** 					wpCtrlWpCmdUpdated=1;
 610:sdk.c         **** 
 611:sdk.c         **** 					wpExampleWpNr++;
 612:sdk.c         **** 
 613:sdk.c         **** 					wpExampleState=0;
 614:sdk.c         **** 					wpExampleActive=0;
 615:sdk.c         **** 				}
 616:sdk.c         **** 
 617:sdk.c         **** 				if (wpCtrlNavStatus&WP_NAVSTAT_PILOT_ABORT)
 618:sdk.c         **** 				{
 619:sdk.c         **** 					wpExampleActive=0;
 620:sdk.c         **** 					wpExampleState=0;
 621:sdk.c         **** 				}
 622:sdk.c         **** 
 623:sdk.c         **** 
 624:sdk.c         **** 			}
 625:sdk.c         **** 			if ((RO_ALL_Data.channel[6]<1600) && (wpExampleActive==0))
 626:sdk.c         **** 						wpExampleState=0;
 627:sdk.c         **** 		break;
 628:sdk.c         **** 
 629:sdk.c         **** 		default:
 630:sdk.c         **** 			wpExampleState=0;
 631:sdk.c         **** 		break;
 632:sdk.c         **** 	}
 633:sdk.c         **** 
 634:sdk.c         **** }
 635:sdk.c         **** 
 636:sdk.c         **** int SDK_EXAMPLE_turn_motors_on(void) //hold throttle stick down and yaw stick fully left to turn mo
 637:sdk.c         **** {
 288              	1
 289              		.loc 1 637 0
 290              		stmfd	sp!, {r4, lr}
 291              	.LCFI1:
 638:sdk.c         **** 	static int timeout=0;
 639:sdk.c         **** 
 640:sdk.c         **** 	WO_SDK.ctrl_mode=0x02;	//0x00: direct individual motor control: individual commands for motors 0..
 641:sdk.c         **** 							//0x01: direct motor control using standard output mapping: commands are interpreted as pitc
 642:sdk.c         **** 							//0x02: attitude and throttle control: commands are input for standard attitude controller
 643:sdk.c         **** 							//0x03: GPS waypoint control
 644:sdk.c         **** 
 645:sdk.c         **** 	WO_SDK.ctrl_enabled=1;  //0: disable control by HL processor
 646:sdk.c         **** 							//1: enable control by HL processor
 647:sdk.c         **** 
 648:sdk.c         **** 	WO_SDK.disable_motor_onoff_by_stick=0; //make sure stick command is accepted
 649:sdk.c         **** 
 650:sdk.c         **** 	if(++timeout>=1000)
 292              	c 1 645 0
 293 01e4 7C009FE5 		mov	r1, #1
 294 01e8 003090E5 		.loc 1 648 0
 295              		mov	lr, #0
 296 01ec 78209FE5 		.loc 1 650 0
 297              		cmp	ip, #1000
 298 01f0 01C083E2 		.loc 1 640 0
 299              		mov	r3, #2
 300 01f4 10402DE9 		.loc 1 650 0
 301              		str	ip, [r0, #0]
 302              		.loc 1 652 0
 303 01f8 0110A0E3 		mov	r4, r1
 304              		.loc 1 640 0
 305 01fc 00E0A0E3 		strb	r3, [r2, #0]
 306              		.loc 1 648 0
 307 0200 FA0F5CE3 		strb	lr, [r2, #2]
 308              		.loc 1 645 0
 309 0204 0230A0E3 		strb	r1, [r2, #1]
 310              		.loc 1 652 0
 311 0208 00C080E5 		strge	lr, [r0, #0]
 651:sdk.c         **** 	{
 652:sdk.c         **** 		timeout=0;
 312              	L36
 313 020c 0140A0E1 		.loc 1 664 0
 314              		ldr	r1, .L40+8
 315 0210 0030C2E5 		.loc 1 666 0
 316              		mvn	r3, #2032
 317 0214 02E0C2E5 		.loc 1 655 0
 318              		cmp	ip, #500
 319 0218 0110C2E5 		.loc 1 666 0
 320              		sub	r3, r3, #14
 321 021c 00E080A5 		strleh	r3, [r1, #4]	@ movhi
 322              		.loc 1 657 0
 323 0220 0D0000AA 		movgt	r3, #12	@ movhi
 653:sdk.c         **** 		return(1); //1 => start sequence completed => motors running => user can stop calling this functi
 654:sdk.c         **** 	}
 655:sdk.c         **** 	else if(timeout>500) //neutral stick command for 500 ms
 656:sdk.c         **** 	{
 657:sdk.c         **** 		WO_CTRL_Input.ctrl=0x0C;	//0x0C: enable throttle control and yaw control
 658:sdk.c         **** 		WO_CTRL_Input.thrust=0;
 659:sdk.c         **** 		WO_CTRL_Input.yaw=0;
 660:sdk.c         **** 		return(0);
 661:sdk.c         **** 	}
 662:sdk.c         **** 	else //hold stick command for 500 ms
 663:sdk.c         **** 	{
 664:sdk.c         **** 		WO_CTRL_Input.ctrl=0x0C;	//0x0C: enable throttle control and yaw control
 324              	0
 325 0224 44109FE5 		movle	r3, #12	@ movhi
 665:sdk.c         **** 		WO_CTRL_Input.thrust=0;
 666:sdk.c         **** 		WO_CTRL_Input.yaw=-2047;
 326              	loc 1 659 0
 327 0228 7F3EE0E3 		strgth	lr, [r1, #4]	@ movhi
 328              		.loc 1 657 0
 329 022c 7D0F5CE3 		strgth	r3, [r1, #8]	@ movhi
 330              		.loc 1 658 0
 331 0230 0E3043E2 		strgth	lr, [r1, #6]	@ movhi
 332 0234 B430C1D1 		.loc 1 665 0
 333              		strleh	lr, [r1, #6]	@ movhi
 334 0238 0C30A0C3 		.loc 1 664 0
 335              		strleh	r3, [r1, #8]	@ movhi
 336 023c 0C30A0D3 		.loc 1 659 0
 337              		mov	r4, lr
 338 0240 B4E0C1C1 		.loc 1 666 0
 339              		movle	r4, lr
 340 0244 B830C1C1 	.L36:
 341              		.loc 1 670 0
 342 0248 B6E0C1C1 		mov	r0, r4
 343              		ldmfd	sp!, {r4, lr}
 344 024c B6E0C1D1 		bx	lr
 345              	.L41:
 346 0250 B830C1D1 		.align	2
 347              	.L40:
 348 0254 0E40A0E1 		.word	timeout.3023
 349              		.word	WO_SDK
 350 0258 0E40A0D1 		.word	WO_CTRL_Input
 351              	.LFE8:
 667:sdk.c         **** 		return(0);
 668:sdk.c         **** 	}
 669:sdk.c         **** 
 670:sdk.c         **** }
 352              	tors_on, .-SDK_EXAMPLE_turn_motors_on
 353 025c 0400A0E1 		.align	2
 354 0260 1040BDE8 		.global	SDK_EXAMPLE_turn_motors_off
 356              	SDK_EXAMPLE_turn_motors_off:
 357              	.LFB9:
 358              		.loc 1 673 0
 359 0268 08000000 		@ Function supports interworking.
 360 026c 00000000 		@ args = 0, pretend = 0, frame = 0
 361 0270 00000000 		@ frame_needed = 0, uses_anonymous_args = 0
 362              		.loc 1 686 0
 363              		ldr	r0, .L49
 364              		ldr	r3, [r0, #0]
 365              		.loc 1 676 0
 366              		ldr	r2, .L49+4
 367              		.loc 1 686 0
 368              		add	ip, r3, #1
 671:sdk.c         **** 
 672:sdk.c         **** int SDK_EXAMPLE_turn_motors_off(void) //hold throttle stick down and yaw stick fully right to turn 
 673:sdk.c         **** {
 369              	mfd	sp!, {r4, lr}
 370              	.LCFI2:
 371              		.loc 1 681 0
 372              		mov	r1, #1
 674:sdk.c         **** 	static int timeout=0;
 675:sdk.c         **** 
 676:sdk.c         **** 	WO_SDK.ctrl_mode=0x02;	//0x00: direct individual motor control: individual commands for motors 0..
 677:sdk.c         **** 							//0x01: direct motor control using standard output mapping: commands are interpreted as pitc
 678:sdk.c         **** 							//0x02: attitude and throttle control: commands are input for standard attitude controller
 679:sdk.c         **** 							//0x03: GPS waypoint control
 680:sdk.c         **** 
 681:sdk.c         **** 	WO_SDK.ctrl_enabled=1;  //0: disable control by HL processor
 682:sdk.c         **** 							//1: enable control by HL processor
 683:sdk.c         **** 
 684:sdk.c         **** 	WO_SDK.disable_motor_onoff_by_stick=0; //make sure stick command is accepted
 685:sdk.c         **** 
 686:sdk.c         **** 	if(++timeout>=1000)
 373              	c 1 684 0
 374 0274 7C009FE5 		mov	lr, #0
 375 0278 003090E5 		.loc 1 686 0
 376              		cmp	ip, #1000
 377 027c 78209FE5 		.loc 1 676 0
 378              		mov	r3, #2
 379 0280 01C083E2 		.loc 1 686 0
 380              		str	ip, [r0, #0]
 381 0284 10402DE9 		.loc 1 688 0
 382              		mov	r4, r1
 383              		.loc 1 676 0
 384 0288 0110A0E3 		strb	r3, [r2, #0]
 385              		.loc 1 684 0
 386 028c 00E0A0E3 		strb	lr, [r2, #2]
 387              		.loc 1 681 0
 388 0290 FA0F5CE3 		strb	r1, [r2, #1]
 389              		.loc 1 688 0
 390 0294 0230A0E3 		strge	lr, [r0, #0]
 391              		.loc 1 686 0
 392 0298 00C080E5 		bge	.L45
 687:sdk.c         **** 	{
 688:sdk.c         **** 		timeout=0;
 393              	2, .L49+8
 394 029c 0140A0E1 		.loc 1 691 0
 395              		cmp	ip, #500
 396 02a0 0030C2E5 		.loc 1 693 0
 397              		mov	r3, r2
 398 02a4 02E0C2E5 		.loc 1 702 0
 399              		mvnle	r3, #63488
 400 02a8 0110C2E5 		.loc 1 695 0
 401              		strgth	lr, [r2, #4]	@ movhi
 402 02ac 00E080A5 		.loc 1 702 0
 403              		strleh	r3, [r2, #4]	@ movhi
 404 02b0 0D0000AA 		.loc 1 693 0
 689:sdk.c         **** 		return(1); //1 => stop sequence completed => motors turned off => user can stop calling this func
 690:sdk.c         **** 	}
 691:sdk.c         **** 	else if(timeout>500) //neutral stick command for 500 ms
 692:sdk.c         **** 	{
 693:sdk.c         **** 		WO_CTRL_Input.ctrl=0x0C;	//0x0C: enable throttle control and yaw control
 694:sdk.c         **** 		WO_CTRL_Input.thrust=0;
 695:sdk.c         **** 		WO_CTRL_Input.yaw=0;
 696:sdk.c         **** 		return(0);
 697:sdk.c         **** 	}
 698:sdk.c         **** 	else //hold stick command for 500 ms
 699:sdk.c         **** 	{
 700:sdk.c         **** 		WO_CTRL_Input.ctrl=0x0C;	//0x0C: enable throttle control and yaw control
 405              	12	@ movhi
 406 02b4 44209FE5 		.loc 1 700 0
 407              		movle	r3, #12	@ movhi
 408 02b8 7D0F5CE3 		.loc 1 693 0
 409              		strgth	r2, [r3, #8]	@ movhi
 410 02bc 0230A0E1 		.loc 1 694 0
 701:sdk.c         **** 		WO_CTRL_Input.thrust=0;
 702:sdk.c         **** 		WO_CTRL_Input.yaw=2047;
 411              	h	lr, [r3, #6]	@ movhi
 412 02c0 3E3BE0D3 		.loc 1 701 0
 413              		strleh	lr, [r2, #6]	@ movhi
 414 02c4 B4E0C2C1 		.loc 1 700 0
 415              		strleh	r3, [r2, #8]	@ movhi
 416 02c8 B430C2D1 		.loc 1 695 0
 417              		mov	r4, lr
 418 02cc 0C20A0C3 		.loc 1 702 0
 419              		movle	r4, lr
 420 02d0 0C30A0D3 	.L45:
 421              		.loc 1 705 0
 422 02d4 B820C3C1 		mov	r0, r4
 423              		ldmfd	sp!, {r4, lr}
 424 02d8 B6E0C3C1 		bx	lr
 425              	.L50:
 426 02dc B6E0C2D1 		.align	2
 427              	.L49:
 428 02e0 B830C2D1 		.word	timeout.3030
 429              		.word	WO_SDK
 430 02e4 0E40A0E1 		.word	WO_CTRL_Input
 431              	.LFE9:
 433              		.global	__floatsidf
 703:sdk.c         **** 		return(0);
 704:sdk.c         **** 	}
 705:sdk.c         **** }
 434              	bal	__muldf3
 435 02ec 0400A0E1 		.global	__fixdfsi
 436 02f0 1040BDE8 		.align	2
 437 02f4 1EFF2FE1 		.global	SDK_EXAMPLE_gps_waypoint_control
 439              	SDK_EXAMPLE_gps_waypoint_control:
 440              	.LFB7:
 441 02f8 04000000 		.loc 1 377 0
 442 02fc 00000000 		@ Function supports interworking.
 443 0300 00000000 		@ args = 0, pretend = 0, frame = 28
 444              		@ frame_needed = 0, uses_anonymous_args = 0
 445              		stmfd	sp!, {r4, r5, r6, r7, r8, r9, sl, fp, lr}
 446              	.LCFI3:
 447              		.loc 1 387 0
 448              		ldr	r9, .L103
 449              		.loc 1 382 0
 450              		ldr	r1, .L103+4
 451              		.loc 1 387 0
 452              		ldrb	r0, [r9, #0]	@ zero_extendqisi2
 453              		.loc 1 384 0
 454              		mov	r3, #1
 455              		.loc 1 382 0
 456              		mov	r2, #3
 457              		.loc 1 377 0
 458              		sub	sp, sp, #52
 459 0304 F04F2DE9 	.LCFI4:
 460              		.loc 1 384 0
 461              		strb	r3, [r1, #1]
 462 0308 64969FE5 		.loc 1 382 0
 463              		strb	r2, [r1, #0]
 464 030c 64169FE5 		.loc 1 387 0
 465              		cmp	r0, #4
 466 0310 0000D9E5 		ldrls	pc, [pc, r0, asl #2]
 467              		b	.L52
 468 0314 0130A0E3 		.p2align 2
 469              	.L58:
 470 0318 0320A0E3 		.word	.L53
 471              		.word	.L54
 472 031c 34D04DE2 		.word	.L55
 473              		.word	.L56
 474              		.word	.L57
 475 0320 0130C1E5 	.L52:
 476              		.loc 1 630 0
 477 0324 0020C1E5 		mov	r3, #0
 478              	.LVL1:
 479 0328 040050E3 	.L98:
 480 032c 00F19F97 		strb	r3, [r9, #0]
 481 0330 040000EA 	.LVL2:
 482              	.L88:
 483              		.loc 1 634 0
 484 0334 B8060000 		add	sp, sp, #52
 485 0338 C8040000 		ldmfd	sp!, {r4, r5, r6, r7, r8, r9, sl, fp, lr}
 486 033c 74060000 		bx	lr
 487 0340 84040000 	.LVL3:
 488 0344 5C030000 	.L57:
 489              		.loc 1 570 0
 490              		ldr	fp, .L103+8
 491 0348 0030A0E3 		ldrb	sl, [fp, #0]	@ zero_extendqisi2
 492              		cmp	sl, #0
 493              		bne	.L80
 494 034c 0030C9E5 		ldr	r2, .L103+12
 495              		ldrb	r3, [r2, #0]	@ zero_extendqisi2
 496              		cmp	r3, #0
 497              		beq	.L80
 498 0350 34D08DE2 		.loc 1 573 0
 499 0354 F04FBDE8 		ldr	r3, .L103+16
 500 0358 1EFF2FE1 		ldrh	r7, [r3, #0]
 501              		tst	r7, #2
 502              		beq	.L83
 503              		.loc 1 577 0
 504 035c 18B69FE5 		ldr	r5, .L103+20
 505 0360 00A0DBE5 		.loc 1 586 0
 506 0364 00005AE3 		ldr	r3, .L103+24
 507 0368 4000001A 		.loc 1 577 0
 508 036c 0C269FE5 		mov	ip, #100
 509 0370 0030D2E5 		.loc 1 586 0
 510 0374 000053E3 		ldr	r6, [r3, #36]
 511 0378 3C00000A 		.loc 1 587 0
 512              		ldr	r4, [r3, #132]
 513 037c 00369FE5 		.loc 1 591 0
 514 0380 B070D3E1 		ldr	r1, .L103+28
 515 0384 020017E3 		.loc 1 577 0
 516 0388 3400000A 		strb	ip, [r5, #5]
 517              		.loc 1 578 0
 518 038c F4559FE5 		mov	lr, #2992
 519              		.loc 1 583 0
 520 0390 F4359FE5 		sub	ip, ip, #77
 521              		.loc 1 578 0
 522 0394 64C0A0E3 		add	lr, lr, #8
 523              		.loc 1 580 0
 524 0398 246093E5 		mov	r8, #1
 525              		.loc 1 583 0
 526 039c 844093E5 		strb	ip, [r5, #4]
 527              		.loc 1 579 0
 528 03a0 E8159FE5 		mov	ip, #400	@ movhi
 529              		.loc 1 591 0
 530 03a4 05C0C5E5 		ldmia	r1, {r2-r3}
 531              		.loc 1 579 0
 532 03a8 BBEEA0E3 		strh	ip, [r5, #6]	@ movhi
 533              		.loc 1 578 0
 534 03ac 4DC04CE2 		strh	lr, [r5, #8]	@ movhi
 535              		.loc 1 586 0
 536 03b0 08E08EE2 		str	r6, [r5, #20]
 537              		.loc 1 587 0
 538 03b4 0180A0E3 		str	r4, [r5, #24]
 539              		.loc 1 591 0
 540 03b8 04C0C5E5 		ldr	r0, .L103+32
 541              		mov	r1, #0
 542 03bc 19CEA0E3 		.loc 1 580 0
 543              		str	r8, [r5, #0]
 544 03c0 0C0091E8 		.loc 1 591 0
 545              		bl	__muldf3
 546 03c4 B6C0C5E1 		bl	__fixdfsi
 547              		str	r0, [sp, #32]
 548 03c8 B8E0C5E1 		ldr	lr, [sp, #32]
 549              		.loc 1 592 0
 550 03cc 146085E5 		ldr	r1, .L103+36
 551              		.loc 1 591 0
 552 03d0 184085E5 		str	lr, [r5, #12]
 553              		.loc 1 592 0
 554 03d4 B8059FE5 		ldmia	r1, {r2-r3}
 555 03d8 0010A0E3 		ldr	r0, .L103+32
 556              		mov	r1, #0
 557 03dc 008085E5 		bl	__muldf3
 558              		bl	__fixdfsi
 559 03e0 FEFFFFEB 		.loc 1 611 0
 560 03e4 FEFFFFEB 		ldr	r2, .L103+40
 561 03e8 20008DE5 		ldrb	r3, [r2, #0]	@ zero_extendqisi2
 562 03ec 20E09DE5 		.loc 1 595 0
 563              		add	r6, r6, #400
 564 03f0 A0159FE5 		ldr	r1, [sp, #32]
 565              		.loc 1 611 0
 566 03f4 0CE085E5 		add	r3, r3, r8
 567              		.loc 1 595 0
 568 03f8 0C0091E8 		add	r4, r4, r6
 569 03fc 90059FE5 		.loc 1 611 0
 570 0400 0010A0E3 		strb	r3, [r2, #0]
 571 0404 FEFFFFEB 		.loc 1 595 0
 572 0408 FEFFFFEB 		add	r4, r4, r1
 573              		.loc 1 607 0
 574 040c 88259FE5 		ldr	r2, .L103+12
 575 0410 0030D2E5 		.loc 1 595 0
 576              		sub	r4, r4, #18688
 577 0414 196E86E2 		sub	r4, r4, #34
 578 0418 20109DE5 		.loc 1 607 0
 579              		strb	sl, [r2, #0]
 580 041c 083083E0 		.loc 1 608 0
 581              		ldr	r3, .L103+44
 582 0420 064084E0 		.loc 1 614 0
 583              		ldr	r2, .L103+48
 584 0424 0030C2E5 		.loc 1 595 0
 585              		add	r4, r0, r4
 586 0428 014084E0 		strh	r4, [r5, #10]	@ movhi
 587              		.loc 1 609 0
 588 042c 4C259FE5 		strb	r8, [fp, #0]
 589              		.loc 1 608 0
 590 0430 494C44E2 		strb	r8, [r3, #0]
 591 0434 224044E2 		.loc 1 614 0
 592              		strb	sl, [r2, #0]
 593 0438 00A0C2E5 		.loc 1 592 0
 594              		str	r0, [r5, #16]
 595 043c 5C359FE5 		.loc 1 613 0
 596              		strb	sl, [r9, #0]
 597 0440 5C259FE5 	.L83:
 598              		.loc 1 617 0
 599 0444 044080E0 		tst	r7, #8
 600 0448 BA40C5E1 		.loc 1 619 0
 601              		ldrne	r3, .L103+48
 602 044c 0080CBE5 		.loc 1 620 0
 603              		strneb	sl, [r9, #0]
 604 0450 0080C3E5 		.loc 1 619 0
 605              		strneb	sl, [r3, #0]
 606 0454 00A0C2E5 	.L80:
 607              		.loc 1 625 0
 608 0458 100085E5 		ldr	r4, .L103+24
 609              		ldrh	r3, [r4, #24]
 610 045c 00A0C9E5 		cmp	r3, #1600
 611              		bcc	.L99
 612              		b	.L88
 613 0460 080017E3 	.L56:
 614              		.loc 1 508 0
 615 0464 38359F15 		ldr	sl, .L103+8
 616              		ldrb	r8, [sl, #0]	@ zero_extendqisi2
 617 0468 00A0C915 		cmp	r8, #0
 618              		bne	.L72
 619 046c 00A0C315 		ldr	fp, .L103+12
 620              		ldrb	r3, [fp, #0]	@ zero_extendqisi2
 621              		cmp	r3, #0
 622 0470 14459FE5 		bne	.L101
 623 0474 B831D4E1 	.LVL4:
 624 0478 190D53E3 	.L72:
 625 047c 0C00003A 		.loc 1 564 0
 626 0480 B2FFFFEA 		ldr	r1, .L103+24
 627              		ldrh	r3, [r1, #24]
 628              		cmp	r3, #1600
 629 0484 F0A49FE5 		bcs	.L88
 630 0488 0080DAE5 	.L99:
 631 048c 000058E3 		.loc 1 625 0
 632 0490 0300001A 		ldr	r3, .L103+48
 633 0494 E4B49FE5 		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 634 0498 0030DBE5 		cmp	r3, #0
 635 049c 000053E3 		beq	.L98
 636 04a0 8F00001A 		b	.L88
 637              	.LVL5:
 638              	.L54:
 639              		.loc 1 396 0
 640 04a4 E0149FE5 		ldr	r1, .L103+24
 641 04a8 B831D1E1 		ldrh	r3, [r1, #24]
 642 04ac 190D53E3 		cmp	r3, #2400
 643 04b0 A6FFFF2A 		bhi	.L62
 644              		ldr	r3, .L103+48
 645              		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 646 04b4 E8349FE5 		cmp	r2, #0
 647 04b8 0030D3E5 		beq	.L88
 648 04bc 000053E3 	.L62:
 649 04c0 A1FFFF0A 	.LBB2:
 650 04c4 A1FFFFEA 		.loc 1 402 0
 651              		ldr	r6, .L103+20
 652              		.loc 1 412 0
 653              		ldr	ip, [r1, #132]
 654 04c8 BC149FE5 		.loc 1 411 0
 655 04cc B831D1E1 		ldr	r1, [r1, #36]
 656 04d0 960E53E3 		.loc 1 414 0
 657 04d4 0300008A 		ldr	r4, .L103+52
 658 04d8 C4349FE5 		.loc 1 402 0
 659 04dc 0020D3E5 		mov	r3, #100
 660 04e0 000052E3 		.loc 1 403 0
 661 04e4 99FFFF0A 		mov	r2, #2992
 662              		add	r2, r2, #8
 663              		.loc 1 405 0
 664              		mov	sl, #1
 665 04e8 98649FE5 		.loc 1 402 0
 666              		strb	r3, [r6, #5]
 667 04ec 84C091E5 		.loc 1 411 0
 668              		str	r1, [r6, #20]
 669 04f0 241091E5 		.loc 1 408 0
 670              		sub	r3, r3, #77
 671 04f4 AC449FE5 		.loc 1 404 0
 672              		mov	r1, #400	@ movhi
 673 04f8 6430A0E3 		.loc 1 414 0
 674              		ldr	r0, [r4, #0]
 675 04fc BB2EA0E3 		.loc 1 412 0
 676 0500 082082E2 		str	ip, [r6, #24]
 677              		.loc 1 403 0
 678 0504 01A0A0E3 		strh	r2, [r6, #8]	@ movhi
 679              		.loc 1 408 0
 680 0508 0530C6E5 		strb	r3, [r6, #4]
 681              		.loc 1 404 0
 682 050c 141086E5 		strh	r1, [r6, #6]	@ movhi
 683              		.loc 1 405 0
 684 0510 4D3043E2 		str	sl, [r6, #0]
 685              		.loc 1 414 0
 686 0514 191EA0E3 		bl	__floatsidf
 687              		ldr	r2, .L103+32
 688 0518 000094E5 		mov	r3, #0
 689              		bl	__divdf3
 690 051c 18C086E5 		str	r0, [sp, #24]
 691              		str	r1, [sp, #28]
 692 0520 B820C6E1 		ldr	r3, .L103+36
 693              		.loc 1 415 0
 694 0524 0430C6E5 		ldr	r0, [r4, #4]
 695              		.loc 1 414 0
 696 0528 B610C6E1 		add	r4, sp, #24
 697              		ldmia	r4, {r4-r5}
 698 052c 00A086E5 		stmia	r3, {r4-r5}
 699              		.loc 1 415 0
 700 0530 FEFFFFEB 		bl	__floatsidf
 701 0534 58249FE5 		ldr	r2, .L103+32
 702 0538 0030A0E3 		mov	r3, #0
 703 053c FEFFFFEB 		bl	__divdf3
 704 0540 18008DE5 		ldr	ip, .L103+28
 705 0544 1C108DE5 		mov	r4, r0
 706 0548 48349FE5 		mov	r5, r1
 707              		stmia	ip, {r4-r5}
 708 054c 040094E5 		.loc 1 418 0
 709              		mov	r2, r4
 710 0550 18408DE2 		mov	r3, r5
 711 0554 300094E8 		mov	r4, #0
 712 0558 300083E8 		mov	r5, #0
 713              		stmia	sp, {r4-r5}
 714 055c FEFFFFEB 		mov	r4, #1073741824
 715 0560 2C249FE5 		add	ip, sp, #44
 716 0564 0030A0E3 		add	lr, sp, #36
 717 0568 FEFFFFEB 		add	r0, sp, #24
 718 056c 1CC49FE5 		ldmia	r0, {r0-r1}
 719 0570 0040A0E1 		add	r4, r4, #3014656
 720 0574 0150A0E1 		mov	r5, #0
 721 0578 30008CE8 		str	ip, [sp, #20]
 722              		str	lr, [sp, #16]
 723 057c 0420A0E1 		str	r4, [sp, #8]
 724 0580 0530A0E1 		str	r5, [sp, #12]
 725 0584 0040A0E3 		bl	xy2latlon
 726 0588 0050A0E3 	.LVL6:
 727 058c 30008DE8 		.loc 1 420 0
 728 0590 0141A0E3 		add	r2, sp, #44
 729 0594 2CC08DE2 		ldmia	r2, {r2-r3}
 730 0598 24E08DE2 		ldr	r0, .L103+32
 731 059c 18008DE2 		mov	r1, #0
 732 05a0 030090E8 		bl	__muldf3
 733 05a4 2E4884E2 		bl	__fixdfsi
 734 05a8 0050A0E3 		mov	r4, r0
 735 05ac 14C08DE5 	.LVL7:
 736 05b0 10E08DE5 		.loc 1 421 0
 737 05b4 08408DE5 		add	r2, sp, #36
 738 05b8 0C508DE5 		ldmia	r2, {r2-r3}
 739 05bc FEFFFFEB 		ldr	r0, .L103+32
 740              		mov	r1, #0
 741              		.loc 1 420 0
 742 05c0 2C208DE2 		str	r4, [r6, #12]
 743 05c4 0C0092E8 		.loc 1 421 0
 744 05c8 C4039FE5 		bl	__muldf3
 745 05cc 0010A0E3 		bl	__fixdfsi
 746 05d0 FEFFFFEB 		.loc 1 424 0
 747 05d4 FEFFFFEB 		ldrh	r2, [r6, #6]
 748 05d8 0040A0E1 		ldr	r3, [r6, #20]
 749              		ldr	r1, [r6, #24]
 750              		add	r3, r3, r2
 751 05dc 24208DE2 		add	r1, r1, r3
 752 05e0 0C0092E8 		ldrb	ip, [r6, #5]	@ zero_extendqisi2
 753 05e4 A8039FE5 		add	r1, r1, r4
 754 05e8 0010A0E3 		ldrb	r3, [r6, #4]	@ zero_extendqisi2
 755              		add	ip, ip, r1
 756 05ec 0C4086E5 		ldrh	r2, [r6, #8]
 757              		ldr	r1, [r6, #0]
 758 05f0 FEFFFFEB 		add	r3, r3, ip
 759 05f4 FEFFFFEB 		add	r2, r0, r2
 760              		sub	r3, r3, #21760
 761 05f8 B620D6E1 		add	r2, r2, r1
 762 05fc 143096E5 		sub	r3, r3, #86
 763 0600 181096E5 		add	r2, r2, r3
 764 0604 023083E0 		.loc 1 438 0
 765 0608 031081E0 		ldr	r3, .L103+8
 766 060c 05C0D6E5 		.loc 1 424 0
 767 0610 041081E0 		strh	r2, [r6, #10]	@ movhi
 768 0614 0430D6E5 		.loc 1 439 0
 769 0618 01C08CE0 		ldr	r2, .L103+40
 770 061c B820D6E1 		.loc 1 436 0
 771 0620 001096E5 		mov	r1, #0
 772 0624 0C3083E0 		.loc 1 438 0
 773 0628 022080E0 		strb	sl, [r3, #0]
 774 062c 553C43E2 		.loc 1 440 0
 775 0630 012082E0 		mov	r3, #2
 776 0634 563043E2 		.loc 1 439 0
 777 0638 032082E0 		strb	r1, [r2, #0]
 778              		.loc 1 440 0
 779 063c 38339FE5 		strb	r3, [r9, #0]
 780              		.loc 1 436 0
 781 0640 BA20C6E1 		ldr	r2, .L103+12
 782              		.loc 1 437 0
 783 0644 50239FE5 		ldr	r3, .L103+44
 784              		.loc 1 436 0
 785 0648 0010A0E3 		strb	r1, [r2, #0]
 786              		.loc 1 437 0
 787 064c 00A0C3E5 		strb	sl, [r3, #0]
 788              		.loc 1 421 0
 789 0650 0230A0E3 		str	r0, [r6, #16]
 790              		b	.L88
 791 0654 0010C2E5 	.LVL8:
 792              	.L55:
 793 0658 0030C9E5 	.LBE2:
 794              		.loc 1 447 0
 795 065c 1C239FE5 		ldr	sl, .L103+8
 796              		ldrb	r8, [sl, #0]	@ zero_extendqisi2
 797 0660 38339FE5 		cmp	r8, #0
 798              		bne	.L72
 799 0664 0010C2E5 		ldr	fp, .L103+12
 800              		ldrb	r3, [fp, #0]	@ zero_extendqisi2
 801 0668 00A0C3E5 		cmp	r3, #0
 802              		beq	.L72
 803 066c 100086E5 		.loc 1 450 0
 804 0670 36FFFFEA 		ldr	r5, .L103+16
 805              		ldrh	ip, [r5, #0]
 806              		tst	ip, #2
 807              		bne	.L102
 808              	.LVL9:
 809 0674 00A39FE5 	.L75:
 810 0678 0080DAE5 		.loc 1 556 0
 811 067c 000058E3 		tst	ip, #8
 812 0680 87FFFF1A 		.loc 1 558 0
 813 0684 F4B29FE5 		ldrne	r3, .L103+48
 814 0688 0030DBE5 		.loc 1 559 0
 815 068c 000053E3 		strneb	r8, [r9, #0]
 816 0690 83FFFF0A 		.loc 1 558 0
 817              		strneb	r8, [r3, #0]
 818 0694 E8529FE5 		b	.L72
 819 0698 B0C0D5E1 	.LVL10:
 820 069c 02001CE3 	.L53:
 821 06a0 6400001A 		.loc 1 391 0
 822              		ldr	r3, .L103+24
 823              		ldrh	r2, [r3, #24]
 824              		cmp	r2, #1600
 825 06a4 08001CE3 		bcc	.L59
 826              		ldr	r3, .L103+48
 827 06a8 F4329F15 		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 828              		cmp	r2, #0
 829 06ac 0080C915 		beq	.L88
 830              	.L59:
 831 06b0 0080C315 		.loc 1 392 0
 832 06b4 7AFFFFEA 		mov	r3, #1
 833              		strb	r3, [r9, #0]
 834              		b	.L88
 835              	.L101:
 836 06b8 CC329FE5 		.loc 1 511 0
 837 06bc B821D3E1 		ldr	r2, .L103+16
 838 06c0 190D52E3 		ldrh	ip, [r2, #0]
 839 06c4 0300003A 		tst	ip, #2
 840 06c8 D4329FE5 		beq	.L75
 841 06cc 0020D3E5 	.LBB3:
 842 06d0 000052E3 		.loc 1 530 0
 843 06d4 1DFFFF0A 		ldr	r3, .L103+36
 844              		ldr	ip, .L103+28
 845              		.loc 1 526 0
 846 06d8 0130A0E3 		ldr	r6, .L103+24
 847 06dc 0030C9E5 		.loc 1 517 0
 848 06e0 1AFFFFEA 		ldr	r4, .L103+20
 849              		.loc 1 530 0
 850              		ldmia	r3, {r0-r1}
 851 06e4 98229FE5 		.loc 1 526 0
 852 06e8 B0C0D2E1 		ldr	r5, [r6, #36]
 853 06ec 02001CE3 		.loc 1 530 0
 854 06f0 EBFFFF0A 		ldmia	ip, {r2-r3}
 855              		.loc 1 518 0
 856              		mov	lr, #2992
 857 06f4 9C329FE5 		.loc 1 517 0
 858 06f8 90C29FE5 		mov	ip, #100
 859              		.loc 1 527 0
 860 06fc 88629FE5 		ldr	r6, [r6, #132]
 861              		.loc 1 517 0
 862 0700 80429FE5 		strb	ip, [r4, #5]
 863              		.loc 1 518 0
 864 0704 030093E8 		add	lr, lr, #8
 865              		.loc 1 523 0
 866 0708 245096E5 		sub	ip, ip, #77
 867              		.loc 1 518 0
 868 070c 0C009CE8 		strh	lr, [r4, #8]	@ movhi
 869              		.loc 1 523 0
 870 0710 BBEEA0E3 		strb	ip, [r4, #4]
 871              		.loc 1 526 0
 872 0714 64C0A0E3 		str	r5, [r4, #20]
 873              		.loc 1 530 0
 874 0718 846096E5 		add	ip, sp, #36
 875              		add	lr, sp, #44
 876 071c 05C0C4E5 		mov	r5, #1073741824
 877              		.loc 1 527 0
 878 0720 08E08EE2 		str	r6, [r4, #24]
 879              		.loc 1 530 0
 880 0724 4DC04CE2 		add	r5, r5, #3014656
 881              		str	ip, [sp, #16]
 882 0728 B8E0C4E1 		str	lr, [sp, #20]
 883              		.loc 1 519 0
 884 072c 04C0C4E5 		mov	ip, #400	@ movhi
 885              		.loc 1 520 0
 886 0730 145084E5 		mov	lr, #1
 887              		.loc 1 530 0
 888 0734 24C08DE2 		mov	r6, #0
 889 0738 2CE08DE2 		.loc 1 519 0
 890 073c 0151A0E3 		strh	ip, [r4, #6]	@ movhi
 891              		.loc 1 520 0
 892 0740 186084E5 		str	lr, [r4, #0]
 893              		.loc 1 530 0
 894 0744 2E5885E2 		stmia	sp, {r5-r6}
 895 0748 10C08DE5 		mov	r5, #0
 896 074c 14E08DE5 		mov	r6, #0
 897              		str	r5, [sp, #8]
 898 0750 19CEA0E3 		str	r6, [sp, #12]
 899              		bl	xy2latlon
 900 0754 01E0A0E3 	.LVL11:
 901              		.loc 1 532 0
 902 0758 0060A0E3 		add	r2, sp, #44
 903              		ldmia	r2, {r2-r3}
 904 075c B6C0C4E1 		ldr	r0, .L103+32
 905              		mov	r1, #0
 906 0760 00E084E5 		bl	__muldf3
 907              		bl	__fixdfsi
 908 0764 60008DE8 		mov	r5, r0
 909 0768 0050A0E3 	.LVL12:
 910 076c 0060A0E3 		.loc 1 533 0
 911 0770 08508DE5 		add	r2, sp, #36
 912 0774 0C608DE5 		ldmia	r2, {r2-r3}
 913 0778 FEFFFFEB 		.loc 1 532 0
 914              		str	r5, [r4, #12]
 915              		.loc 1 533 0
 916 077c 2C208DE2 		ldr	r0, .L103+32
 917 0780 0C0092E8 		mov	r1, #0
 918 0784 08029FE5 		bl	__muldf3
 919 0788 0010A0E3 		bl	__fixdfsi
 920 078c FEFFFFEB 		.loc 1 536 0
 921 0790 FEFFFFEB 		ldrh	r1, [r4, #6]
 922 0794 0050A0E1 		ldr	r3, [r4, #20]
 923              		ldr	r2, [r4, #24]
 924              		add	r3, r3, r1
 925 0798 24208DE2 		add	r2, r2, r3
 926 079c 0C0092E8 		ldrb	ip, [r4, #5]	@ zero_extendqisi2
 927              		add	r2, r2, r5
 928 07a0 0C5084E5 		ldrb	r1, [r4, #4]	@ zero_extendqisi2
 929              		add	ip, ip, r2
 930 07a4 E8019FE5 		ldrh	r3, [r4, #8]
 931 07a8 0010A0E3 		.loc 1 551 0
 932 07ac FEFFFFEB 		ldr	r5, .L103+40
 933 07b0 FEFFFFEB 		.loc 1 536 0
 934              		add	r1, r1, ip
 935 07b4 B610D4E1 		ldr	lr, [r4, #0]
 936 07b8 143094E5 		add	r3, r0, r3
 937 07bc 182094E5 		sub	r1, r1, #21760
 938 07c0 013083E0 		.loc 1 551 0
 939 07c4 032082E0 		ldrb	r2, [r5, #0]	@ zero_extendqisi2
 940 07c8 05C0D4E5 		.loc 1 536 0
 941 07cc 052082E0 		add	r3, r3, lr
 942 07d0 0410D4E5 		sub	r1, r1, #86
 943 07d4 02C08CE0 		ldr	r6, .L103+16
 944 07d8 B830D4E1 		add	r3, r3, r1
 945              		.loc 1 551 0
 946 07dc B8519FE5 		add	r2, r2, #1
 947              		.loc 1 536 0
 948 07e0 0C1081E0 		strh	r3, [r4, #10]	@ movhi
 949 07e4 00E094E5 		ldrh	ip, [r6, #0]
 950 07e8 033080E0 		.loc 1 549 0
 951 07ec 551C41E2 		ldr	r3, .L103+44
 952              		.loc 1 550 0
 953 07f0 0020D5E5 		mov	lr, #1
 954              		.loc 1 551 0
 955 07f4 0E3083E0 		strb	r2, [r5, #0]
 956 07f8 561041E2 		.loc 1 553 0
 957 07fc 80619FE5 		mov	r2, #4
 958 0800 013083E0 		.loc 1 550 0
 959              		strb	lr, [sl, #0]
 960 0804 012082E2 		.loc 1 548 0
 961              		strb	r8, [fp, #0]
 962 0808 BA30C4E1 		.loc 1 549 0
 963 080c B0C0D6E1 		strb	lr, [r3, #0]
 964              		.loc 1 553 0
 965 0810 88319FE5 		strb	r2, [r9, #0]
 966              		.loc 1 533 0
 967 0814 01E0A0E3 		str	r0, [r4, #16]
 968              		b	.L75
 969 0818 0020C5E5 	.LVL13:
 970              	.L102:
 971 081c 0420A0E3 	.LBE3:
 972              	.LBB4:
 973 0820 00E0CAE5 		.loc 1 469 0
 974              		ldr	r3, .L103+36
 975 0824 0080CBE5 		ldr	ip, .L103+28
 976              		.loc 1 456 0
 977 0828 00E0C3E5 		ldr	r4, .L103+20
 978              		.loc 1 465 0
 979 082c 0020C9E5 		ldr	r6, .L103+24
 980              		.loc 1 469 0
 981 0830 100084E5 		ldmia	r3, {r0-r1}
 982 0834 9AFFFFEA 		.loc 1 457 0
 983              		mov	lr, #2992
 984              		.loc 1 469 0
 985              		ldmia	ip, {r2-r3}
 986              		.loc 1 456 0
 987              		mov	ip, #100
 988 0838 58319FE5 		.loc 1 465 0
 989 083c 4CC19FE5 		ldr	r5, [r6, #36]
 990              		.loc 1 456 0
 991 0840 40419FE5 		strb	ip, [r4, #5]
 992              		.loc 1 466 0
 993 0844 40619FE5 		ldr	r6, [r6, #132]
 994              		.loc 1 457 0
 995 0848 030093E8 		add	lr, lr, #8
 996              		.loc 1 462 0
 997 084c BBEEA0E3 		sub	ip, ip, #77
 998              		.loc 1 457 0
 999 0850 0C009CE8 		strh	lr, [r4, #8]	@ movhi
 1000              		.loc 1 462 0
 1001 0854 64C0A0E3 		strb	ip, [r4, #4]
 1002              		.loc 1 469 0
 1003 0858 245096E5 		add	lr, sp, #36
 1004              		add	ip, sp, #44
 1005 085c 05C0C4E5 		.loc 1 465 0
 1006              		str	r5, [r4, #20]
 1007 0860 846096E5 		.loc 1 466 0
 1008              		str	r6, [r4, #24]
 1009 0864 08E08EE2 		.loc 1 469 0
 1010              		mov	r5, #1073741824
 1011 0868 4DC04CE2 		str	ip, [sp, #16]
 1012              		str	lr, [sp, #20]
 1013 086c B8E0C4E1 		.loc 1 458 0
 1014              		mov	ip, #400	@ movhi
 1015 0870 04C0C4E5 		.loc 1 459 0
 1016              		mov	lr, #1
 1017 0874 24E08DE2 		.loc 1 458 0
 1018 0878 2CC08DE2 		strh	ip, [r4, #6]	@ movhi
 1019              		.loc 1 459 0
 1020 087c 145084E5 		str	lr, [r4, #0]
 1021              		.loc 1 469 0
 1022 0880 186084E5 		add	r5, r5, #3014656
 1023              		mov	r6, #0
 1024 0884 0151A0E3 		stmia	sp, {r5-r6}
 1025 0888 10C08DE5 		str	r5, [sp, #8]
 1026 088c 14E08DE5 		str	r6, [sp, #12]
 1027              		bl	xy2latlon
 1028 0890 19CEA0E3 	.LVL14:
 1029              		.loc 1 471 0
 1030 0894 01E0A0E3 		add	r2, sp, #36
 1031              		ldmia	r2, {r2-r3}
 1032 0898 B6C0C4E1 		ldr	r0, .L103+32
 1033              		mov	r1, #0
 1034 089c 00E084E5 		bl	__muldf3
 1035              		bl	__fixdfsi
 1036 08a0 2E5885E2 		mov	r5, r0
 1037 08a4 0060A0E3 	.LVL15:
 1038 08a8 60008DE8 		.loc 1 472 0
 1039 08ac 08508DE5 		add	r2, sp, #44
 1040 08b0 0C608DE5 		ldmia	r2, {r2-r3}
 1041 08b4 FEFFFFEB 		.loc 1 471 0
 1042              		str	r5, [r4, #12]
 1043              		.loc 1 472 0
 1044 08b8 24208DE2 		ldr	r0, .L103+32
 1045 08bc 0C0092E8 		mov	r1, #0
 1046 08c0 CC009FE5 		bl	__muldf3
 1047 08c4 0010A0E3 		bl	__fixdfsi
 1048 08c8 FEFFFFEB 		.loc 1 475 0
 1049 08cc FEFFFFEB 		ldrh	r1, [r4, #6]
 1050 08d0 0050A0E1 		ldr	r3, [r4, #20]
 1051              		ldr	r2, [r4, #24]
 1052              		add	r3, r3, r1
 1053 08d4 2C208DE2 		add	r2, r2, r3
 1054 08d8 0C0092E8 		ldrb	ip, [r4, #5]	@ zero_extendqisi2
 1055              		add	r2, r2, r5
 1056 08dc 0C5084E5 		ldrb	r1, [r4, #4]	@ zero_extendqisi2
 1057              		add	ip, ip, r2
 1058 08e0 AC009FE5 		ldrh	r3, [r4, #8]
 1059 08e4 0010A0E3 		.loc 1 489 0
 1060 08e8 FEFFFFEB 		ldr	r5, .L103+40
 1061 08ec FEFFFFEB 		.loc 1 475 0
 1062              		add	r1, r1, ip
 1063 08f0 B610D4E1 		ldr	lr, [r4, #0]
 1064 08f4 143094E5 		add	r3, r0, r3
 1065 08f8 182094E5 		sub	r1, r1, #21760
 1066 08fc 013083E0 		.loc 1 489 0
 1067 0900 032082E0 		ldrb	r2, [r5, #0]	@ zero_extendqisi2
 1068 0904 05C0D4E5 		.loc 1 475 0
 1069 0908 052082E0 		add	r3, r3, lr
 1070 090c 0410D4E5 		sub	r1, r1, #86
 1071 0910 02C08CE0 		ldr	r6, .L103+16
 1072 0914 B830D4E1 		add	r3, r3, r1
 1073              		.loc 1 489 0
 1074 0918 7C509FE5 		add	r2, r2, #1
 1075              		.loc 1 475 0
 1076 091c 0C1081E0 		strh	r3, [r4, #10]	@ movhi
 1077 0920 00E094E5 		ldrh	ip, [r6, #0]
 1078 0924 033080E0 		.loc 1 487 0
 1079 0928 551C41E2 		ldr	r3, .L103+44
 1080              		.loc 1 488 0
 1081 092c 0020D5E5 		mov	lr, #1
 1082              		.loc 1 489 0
 1083 0930 0E3083E0 		strb	r2, [r5, #0]
 1084 0934 561041E2 		.loc 1 491 0
 1085 0938 44609FE5 		mov	r2, #3
 1086 093c 013083E0 		.loc 1 488 0
 1087              		strb	lr, [sl, #0]
 1088 0940 012082E2 		.loc 1 486 0
 1089              		strb	r8, [fp, #0]
 1090 0944 BA30C4E1 		.loc 1 487 0
 1091 0948 B0C0D6E1 		strb	lr, [r3, #0]
 1092              		.loc 1 491 0
 1093 094c 4C309FE5 		strb	r2, [r9, #0]
 1094              		.loc 1 472 0
 1095 0950 01E0A0E3 		str	r0, [r4, #16]
 1096              		b	.L75
 1097 0954 0020C5E5 	.L104:
 1098              		.align	2
 1099 0958 0320A0E3 	.L103:
 1100              		.word	wpExampleState.2930
 1101 095c 00E0CAE5 		.word	WO_SDK
 1102              		.word	wpCtrlWpCmdUpdated
 1103 0960 0080CBE5 		.word	wpCtrlAckTrigger
 1104              		.word	wpCtrlNavStatus
 1105 0964 00E0C3E5 		.word	wpToLL
 1106              		.word	RO_ALL_Data
 1107 0968 0020C9E5 		.word	originLon.2932
 1108              		.word	1097011920
 1109 096c 100084E5 		.word	originLat.2931
 1110 0970 4BFFFFEA 		.word	wpExampleWpNr
 1111              		.word	wpCtrlWpCmd
 1112              		.word	wpExampleActive
 1113              		.word	GPS_Data
 1114 0974 1C000000 	.LBE4:
 1115 0978 00000000 	.LFE7:
 1117 0980 00000000 		.align	2
 1118 0984 00000000 		.global	SDK_mainloop
 1120 098c 00000000 	SDK_mainloop:
 1121 0990 0C000000 	.LFB2:
 1122 0994 D0126341 		.loc 1 175 0
 1123 0998 14000000 		@ Function supports interworking.
 1124 099c 00000000 		@ args = 0, pretend = 0, frame = 24
 1125 09a0 00000000 		@ frame_needed = 0, uses_anonymous_args = 0
 1126 09a4 00000000 		stmfd	sp!, {r4, r5, r6, lr}
 1127 09a8 00000000 	.LCFI5:
 1128              		sub	sp, sp, #24
 1129              	.LCFI6:
 1130              		.loc 1 186 0
 1131              		ldr	r0, .L119
 1132              		.loc 1 190 0
 1133              		add	r6, sp, #3
 1134              		.loc 1 186 0
 1135              		bl	refreshProtocolStream
 1136              		.loc 1 190 0
 1137              		mov	r2, r6
 1138              		mov	r1, #15
 1139              		ldr	r0, .L119
 1140 09ac 70402DE9 		bl	encode_COBS
 1141              		.loc 1 194 0
 1142 09b0 18D04DE2 		add	r4, sp, #22
 1143              		.loc 1 190 0
 1144              		mov	r5, r0
 1145 09b4 C0009FE5 		.loc 1 194 0
 1146              		ldr	r1, .L119+4
 1147 09b8 03608DE2 		mov	r0, r4
 1148              		mov	r2, #2
 1149 09bc FEFFFFEB 		bl	memcpy
 1150              	.L106:
 1151 09c0 0620A0E1 		.loc 1 196 0
 1152 09c4 0F10A0E3 		ldrb	r3, [sp, #20]	@ zero_extendqisi2
 1153 09c8 AC009FE5 		cmp	r3, #254
 1154 09cc FEFFFFEB 		.loc 1 198 0
 1155              		mov	r0, r4
 1156 09d0 16408DE2 		add	r1, sp, #20
 1157              		mov	r2, #2
 1158 09d4 0050A0E1 		.loc 1 196 0
 1159              		bne	.L107
 1160 09d8 A0109FE5 		ldrb	r3, [sp, #21]	@ zero_extendqisi2
 1161 09dc 0400A0E1 		cmp	r3, #255
 1162 09e0 0220A0E3 		beq	.L117
 1163 09e4 FEFFFFEB 	.L107:
 1164              		.loc 1 198 0
 1165              		bl	SPI_Master_WriteRead
 1166 09e8 1430DDE5 		b	.L106
 1167 09ec FE0053E3 	.L117:
 1168              		.loc 1 202 0
 1169 09f0 0400A0E1 		and	r1, r5, #255
 1170 09f4 14108DE2 		mov	r0, r6
 1171 09f8 0220A0E3 		bl	SPI_Master_Write
 1172              		.loc 1 208 0
 1173 09fc 0200001A 		mov	r3, #0
 1174 0a00 1530DDE5 		.loc 1 209 0
 1175 0a04 FF0053E3 		mov	r2, #2
 1176 0a08 0100000A 		.loc 1 208 0
 1177              		strb	r3, [sp, #22]
 1178              		.loc 1 209 0
 1179 0a0c FEFFFFEB 		strb	r2, [sp, #23]
 1180 0a10 F4FFFFEA 	.L110:
 1181              		.loc 1 210 0
 1182              		ldrb	r3, [sp, #20]	@ zero_extendqisi2
 1183 0a14 FF1005E2 		cmp	r3, #253
 1184 0a18 0600A0E1 		.loc 1 212 0
 1185 0a1c FEFFFFEB 		mov	r0, r4
 1186              		add	r1, sp, #20
 1187 0a20 0030A0E3 		mov	r2, #2
 1188              		.loc 1 210 0
 1189 0a24 0220A0E3 		bne	.L111
 1190              		ldrb	r3, [sp, #21]	@ zero_extendqisi2
 1191 0a28 1630CDE5 		cmp	r3, #255
 1192              		beq	.L118
 1193 0a2c 1720CDE5 	.L111:
 1194              		.loc 1 212 0
 1195              		bl	SPI_Master_WriteRead
 1196 0a30 1430DDE5 		b	.L110
 1197 0a34 FD0053E3 	.L118:
 1198              		.loc 1 248 0
 1199 0a38 0400A0E1 		bl	SDK_jetiAscTecExampleRun
 1200 0a3c 14108DE2 		.loc 1 250 0
 1201 0a40 0220A0E3 		ldr	r3, .L119+8
 1202              		ldrb	r2, [r3, #0]	@ zero_extendqisi2
 1203 0a44 0200001A 		cmp	r2, #0
 1204 0a48 1530DDE5 		.loc 1 251 0
 1205 0a4c FF0053E3 		blne	SDK_EXAMPLE_gps_waypoint_control
 1206 0a50 0100000A 	.L116:
 1207              		.loc 1 254 0
 1208              		add	sp, sp, #24
 1209 0a54 FEFFFFEB 		ldmfd	sp!, {r4, r5, r6, lr}
 1210 0a58 F4FFFFEA 		bx	lr
 1211              	.L120:
 1212              		.align	2
 1213 0a5c FEFFFFEB 	.L119:
 1214              		.word	protocolStream
 1215 0a60 1C309FE5 		.word	C.0.2880
 1216 0a64 0020D3E5 		.word	wpExampleActive
 1217 0a68 000052E3 	.LFE2:
 1219 0a6c FEFFFF1B 		.global	wpExampleWpNr
 1220              		.bss
 1223 0a74 7040BDE8 	wpExampleWpNr:
 1224 0a78 1EFF2FE1 		.space	1
 1225              		.global	wpExampleActive
 1228 0a7c 00000000 	wpExampleActive:
 1229 0a80 00000000 		.space	1
 1230 0a84 00000000 		.global	emergencyModeUpdate
 1233              	emergencyModeUpdate:
 1234              		.space	1
 1235              		.align	2
 1236              	timeout.3030:
 1237              		.space	4
 1238 0000 00       		.align	2
 1239              	timeout.3023:
 1240              		.space	4
 1241              		.align	2
 1242              	originLon.2932:
 1243 0001 00       		.space	8
 1244              		.align	2
 1245              	originLat.2931:
 1246              		.space	8
 1247              	wpExampleState.2930:
 1248 0002 00       		.space	1
 1249 0003 00       		.section	.rodata
 1252              	C.0.2880:
 1253              		.byte	0
 1254 0008 00000000 		.byte	1
 1255              		.comm	GPS_timeout,4,4
 1256              		.comm	SYSTEM_initialized,1,1
 1257 000c 00000000 		.comm	WO_SDK,4,4
 1257      00000000 
 1258              		.comm	RO_ALL_Data,152,4
 1259              		.comm	RO_RC_Data,16,4
 1260 0014 00000000 		.comm	WO_Direct_Individual_Motor_Control,12,4
 1260      00000000 
 1261              		.comm	WO_Direct_Motor_Control,4,4
 1262 001c 00       		.comm	WO_CTRL_Input,12,4
 1263 001d 000000   		.comm	emergencyMode,1,1
 1264              		.comm	protocolStream,20,4
 1265              		.section	.debug_frame,"",%progbits
 1266              	.Lframe0:
 1267 0000 00       		.4byte	.LECIE0-.LSCIE0
 1268 0001 01       	.LSCIE0:
 1269              		.4byte	0xffffffff
 1270              		.byte	0x1
 1271              		.ascii	"\000"
 1272              		.uleb128 0x1
 1273              		.sleb128 -4
 1274              		.byte	0xe
 1275              		.byte	0xc
 1276              		.uleb128 0xd
 1277              		.uleb128 0x0
 1278              		.align	2
 1436              		.4byte	0x0
DEFINED SYMBOLS
                            *ABS*:00000000 sdk.c
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:13     .text:00000000 SDK_SetEmergencyMode
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:22     .text:00000000 $a
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:45     .text:00000034 $d
                            *COM*:00000001 emergencyMode
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:1247   .bss:00000002 emergencyModeUpdate
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:52     .text:0000003c SDK_EXAMPLE_direct_individual_motor_commands
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:60     .text:0000003c $a
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:144    .text:000000f4 $d
                            *COM*:00000098 RO_ALL_Data
                            *COM*:0000000c WO_Direct_Individual_Motor_Control
                            *COM*:00000004 WO_SDK
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:153    .text:00000104 SDK_EXAMPLE_direct_motor_commands_with_standard_output_mapping
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:160    .text:00000104 $a
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:237    .text:000001a0 $d
                            *COM*:00000004 WO_Direct_Motor_Control
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:246    .text:000001b0 SDK_EXAMPLE_attitude_commands
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:254    .text:000001b0 $a
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:279    .text:000001dc $d
                            *COM*:0000000c WO_CTRL_Input
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:286    .text:000001e4 SDK_EXAMPLE_turn_motors_on
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:293    .text:000001e4 $a
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:359    .text:00000268 $d
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:1253   .bss:00000008 timeout.3023
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:367    .text:00000274 SDK_EXAMPLE_turn_motors_off
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:374    .text:00000274 $a
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:441    .text:000002f8 $d
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:1250   .bss:00000004 timeout.3030
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:453    .text:00000304 SDK_EXAMPLE_gps_waypoint_control
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:459    .text:00000304 $a
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:484    .text:00000334 $d
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:491    .text:00000348 $a
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:1114   .text:00000974 $d
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:1261   .bss:0000001c wpExampleState.2930
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:1256   .bss:0000000c originLon.2932
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:1259   .bss:00000014 originLat.2931
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:1237   .bss:00000000 wpExampleWpNr
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:1242   .bss:00000001 wpExampleActive
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:1134   .text:000009ac SDK_mainloop
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:1140   .text:000009ac $a
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:1228   .text:00000a7c $d
                            *COM*:00000014 protocolStream
C:\Users\Malte\AppData\Local\Temp/ccoZbaaa.s:1266   .rodata:00000000 C.0.2880
                            *COM*:00000004 GPS_timeout
                            *COM*:00000001 SYSTEM_initialized
                            *COM*:00000010 RO_RC_Data

UNDEFINED SYMBOLS
__floatsidf
__divdf3
__muldf3
__fixdfsi
xy2latlon
wpCtrlWpCmdUpdated
wpCtrlAckTrigger
wpCtrlNavStatus
wpToLL
wpCtrlWpCmd
GPS_Data
refreshProtocolStream
encode_COBS
memcpy
SPI_Master_WriteRead
SPI_Master_Write
SDK_jetiAscTecExampleRun
